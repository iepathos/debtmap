{
  "chapter_id": "getting-started",
  "chapter_title": "Getting Started",
  "chapter_file": "book/src/getting-started.md",
  "drift_detected": true,
  "severity": "medium",
  "quality_assessment": "Chapter is well-structured and comprehensive, but contains some incorrect option names and missing newer CLI features. The installation instructions and basic usage are accurate.",
  "issues": [
    {
      "type": "incorrect_example",
      "severity": "high",
      "section": "Advanced Options - Security Focus",
      "description": "Chapter shows --security-enhanced option which doesn't exist in CLI",
      "current_content": "debtmap analyze . --security-enhanced",
      "should_be": "Option does not exist in current CLI implementation",
      "fix_suggestion": "Remove --security-enhanced example or update if this feature exists but uses a different flag name",
      "source_reference": "src/cli.rs:26-208 (Commands::Analyze) - no security-enhanced field"
    },
    {
      "type": "incorrect_example",
      "severity": "medium",
      "section": "Quick Start - Thresholds",
      "description": "Chapter uses --threshold-duplication with value 50, but CLI defines default as 50 lines and description says 'lines', not a percentage",
      "current_content": "debtmap analyze ./src --threshold-complexity 15 --threshold-duplication 50",
      "should_be": "Same syntax works, but clarify this is lines of duplicated code, not a percentage",
      "fix_suggestion": "Add clarifying comment: '# 50 lines of duplicated code triggers duplication detection'",
      "source_reference": "src/cli.rs:49 - threshold_duplication: usize with default 50"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Advanced Options",
      "description": "Chapter doesn't document several CLI options that exist",
      "should_add": "Missing options: --semantic-off, --verbose-macro-warnings, --show-macro-stats, --no-context-aware, --threshold-preset, --multi-pass, --attribution, --detail-level, --aggregate-only, --no-aggregation, --aggregation-method, --min-problematic, --no-god-object, --max-files, --validate-loc, --migrate-cache",
      "fix_suggestion": "Consider adding an 'Expert Options' subsection for less common flags like --semantic-off, --multi-pass, --attribution, etc. These are power-user features that don't need full examples but should be mentioned.",
      "source_reference": "src/cli.rs:86-207 (Commands::Analyze fields)"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Advanced Options - Cache Management",
      "description": "Chapter mentions --cache-stats but doesn't mention --migrate-cache or --cache-location options",
      "should_add": "Document --cache-location for specifying cache directory strategy and --migrate-cache for migrating from local to shared cache",
      "fix_suggestion": "Add subsection under Cache Management:\n```bash\n# Specify custom cache location\ndebtmap analyze . --cache-location /custom/path\n\n# Migrate cache from local to shared location\ndebtmap analyze . --migrate-cache\n```",
      "source_reference": "src/cli.rs:161-167 (migrate_cache and cache_location options)"
    },
    {
      "type": "incomplete_explanation",
      "severity": "low",
      "section": "About Caching",
      "description": "Chapter explains cache location for macOS and Linux but doesn't mention Windows",
      "current_content": "Cache location: `XDG_CACHE_HOME/debtmap` on Linux, `~/Library/Caches/debtmap` on macOS",
      "should_be": "Add Windows cache location information",
      "fix_suggestion": "Update to: 'Cache location: `XDG_CACHE_HOME/debtmap` on Linux, `~/Library/Caches/debtmap` on macOS, `%LOCALAPPDATA%/debtmap` on Windows'",
      "source_reference": "src/cache/cache_location.rs:66-85 (get_shared_cache_dir function)"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Output Formats - JSON",
      "description": "Chapter mentions --output-format unified but doesn't explain what it does or when to use it",
      "current_content": "# For the new unified format (with consistent structure and type field):\ndebtmap analyze . --format json --output-format unified --output report.json",
      "should_add": "Explain the difference between legacy and unified JSON formats",
      "fix_suggestion": "Add explanation:\n- `legacy`: Default format with {File: {...}} and {Function: {...}} wrappers (backward compatible)\n- `unified`: New format (spec 108) with consistent structure and 'type' field for all items\n\nRecommend unified for new integrations, legacy for compatibility with existing tools.",
      "source_reference": "src/cli.rs:34-38 (JsonFormat enum and documentation)"
    },
    {
      "type": "outdated_information",
      "severity": "low",
      "section": "Quick Start - Compare command",
      "description": "Chapter shows compare command without mentioning --plan or --target-location options",
      "current_content": "debtmap compare --before before.json --after after.json",
      "should_be": "Add note about optional --plan or --target-location for focused comparison",
      "fix_suggestion": "Add advanced comparison example:\n```bash\n# Compare with focus on specific function\ndebtmap compare --before before.json --after after.json --target-location src/main.rs:main:10\n\n# Extract target from implementation plan\ndebtmap compare --before before.json --after after.json --plan IMPLEMENTATION_PLAN.md\n```",
      "source_reference": "src/cli.rs:294-301 (Commands::Compare with plan and target_location fields)"
    }
  ],
  "positive_aspects": [
    "Excellent structure progressing from prerequisites to installation to first analysis",
    "Installation instructions cover multiple methods (script, cargo, from source)",
    "Good coverage of troubleshooting common installation issues",
    "Comprehensive examples showing various analyze command options",
    "Clear explanation of output structure and priority levels",
    "Helpful explanation of caching with management commands",
    "Good progression from simple to advanced features",
    "Example output is realistic and helps users understand what to expect",
    "Links to other chapters for deeper topics (Analysis Guide, Output Formats, etc.)"
  ],
  "improvement_suggestions": [
    "Remove or correct the --security-enhanced option example (high priority)",
    "Add brief mention of Windows cache location for completeness",
    "Consider adding a 'Recently Added Features' section to highlight new capabilities",
    "Add a quick reference table of most common options at the end",
    "Consider adding a troubleshooting section for common analysis issues (not just installation)",
    "Explain the difference between legacy and unified JSON output formats",
    "Add examples of the compare command's --plan and --target-location options",
    "Consider grouping advanced options into categories (Output Control, Cache Management, Performance, Analysis Behavior) for better organization"
  ],
  "metadata": {
    "analyzed_at": "2025-01-14",
    "feature_inventory": "Generated from CLI inspection (src/cli.rs) and implementation review",
    "topics_covered": [
      "Installation",
      "Quick start",
      "First analysis",
      "Basic usage",
      "Advanced options",
      "Output formats",
      "Cache management"
    ],
    "validation_focus": "Check installation instructions and quick start examples are current"
  }
}
