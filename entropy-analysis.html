<!DOCTYPE HTML>
<html lang="en" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Entropy Analysis - Debtmap Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Comprehensive guide to Debtmap code complexity and technical debt analyzer">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Debtmap Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/iepathos/debtmap" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="entropy-analysis"><a class="header" href="#entropy-analysis">Entropy Analysis</a></h1>
<p>Entropy analysis is Debtmap’s unique approach to distinguishing genuinely complex code from repetitive pattern-based code. This reduces false positives by 60-75% compared to traditional cyclomatic complexity metrics.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Traditional static analysis tools flag code as “complex” based purely on cyclomatic complexity or lines of code. However, not all complexity is equal:</p>
<ul>
<li><strong>Repetitive patterns</strong> (validation functions, dispatchers) have high cyclomatic complexity but low cognitive load</li>
<li><strong>Diverse logic</strong> (state machines, business rules) may have moderate cyclomatic complexity but high cognitive load</li>
</ul>
<p>Entropy analysis uses information theory to distinguish between these cases.</p>
<h2 id="how-it-works"><a class="header" href="#how-it-works">How It Works</a></h2>
<p>Debtmap’s entropy analysis is <strong>language-agnostic</strong>, working across Rust, Python, JavaScript, and TypeScript codebases using a universal token classification approach. This ensures consistent complexity assessment regardless of the programming language used.</p>
<h3 id="shannon-entropy"><a class="header" href="#shannon-entropy">Shannon Entropy</a></h3>
<p>Shannon entropy measures the variety and unpredictability of code patterns:</p>
<pre><code>H(X) = -Σ p(x) × log₂(p(x))
</code></pre>
<p>Where:</p>
<ul>
<li><code>p(x)</code> = probability of each token type</li>
<li>High entropy (0.8-1.0) = many different patterns</li>
<li>Low entropy (0.0-0.3) = repetitive patterns</li>
</ul>
<h3 id="token-classification"><a class="header" href="#token-classification">Token Classification</a></h3>
<p>Debtmap can classify tokens by importance to give more weight to semantically significant tokens in entropy calculations. This is controlled by the <code>use_classification</code> configuration option.</p>
<p><strong>When enabled</strong> (disabled by default for backward compatibility), tokens are weighted by importance:</p>
<p><strong>High importance (weight: 1.0):</strong></p>
<ul>
<li>Control flow keywords (<code>if</code>, <code>match</code>, <code>for</code>, <code>while</code>)</li>
<li>Error handling (<code>try</code>, <code>catch</code>, <code>?</code>, <code>unwrap</code>)</li>
<li>Async keywords (<code>async</code>, <code>await</code>)</li>
</ul>
<p><strong>Medium importance (weight: 0.7):</strong></p>
<ul>
<li>Function calls</li>
<li>Method invocations</li>
<li>Operators</li>
</ul>
<p><strong>Low importance (weight: 0.3):</strong></p>
<ul>
<li>Identifiers (variable names)</li>
<li>Literals (strings, numbers)</li>
<li>Punctuation</li>
</ul>
<p><strong>When disabled</strong> (<code>use_classification = false</code>), all tokens are treated equally, which may be useful for debugging or when you want unweighted entropy scores.</p>
<h3 id="pattern-repetition-detection"><a class="header" href="#pattern-repetition-detection">Pattern Repetition Detection</a></h3>
<p>Detects repetitive structures in the AST:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Low pattern repetition (0.2) - all branches identical
if a.is_none() { return Err(...) }
if b.is_none() { return Err(...) }
if c.is_none() { return Err(...) }

// High pattern repetition (0.9) - diverse branches
match state {
    Active =&gt; transition_to_standby(),
    Standby =&gt; transition_to_active(),
    Maintenance =&gt; schedule_restart(),
}
<span class="boring">}</span></code></pre></pre>
<h3 id="branch-similarity-analysis"><a class="header" href="#branch-similarity-analysis">Branch Similarity Analysis</a></h3>
<p>Analyzes similarity between conditional branches:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// High branch similarity (0.9) - branches are nearly identical
if condition_a {
    log("A happened");
    process_a();
}
if condition_b {
    log("B happened");
    process_b();
}

// Low branch similarity (0.2) - branches are very different
if needs_auth {
    authenticate_user()?;
    load_profile()?;
} else {
    show_guest_ui();
}
<span class="boring">}</span></code></pre></pre>
<h3 id="effective-complexity-adjustment"><a class="header" href="#effective-complexity-adjustment">Effective Complexity Adjustment</a></h3>
<p>Debtmap uses a multi-factor dampening approach that analyzes three dimensions of code repetitiveness:</p>
<ol>
<li><strong>Pattern Repetition</strong> - Detects repetitive AST structures</li>
<li><strong>Token Entropy</strong> - Measures variety in token usage</li>
<li><strong>Branch Similarity</strong> - Compares similarity between conditional branches</li>
</ol>
<p>These factors are combined multiplicatively with a minimum floor of 0.7 (preserving at least 70% of original complexity):</p>
<pre><code>dampening_factor = (repetition_factor × entropy_factor × branch_factor).max(0.7)
effective_complexity = raw_complexity × dampening_factor
</code></pre>
<h4 id="historical-note-spec-68"><a class="header" href="#historical-note-spec-68">Historical Note: Spec 68</a></h4>
<p><strong>Spec 68: Graduated Entropy Dampening</strong> was the original simple algorithm that only considered entropy &lt; 0.2:</p>
<pre><code>dampening_factor = 0.5 + 0.5 × (entropy / 0.2)  [when entropy &lt; 0.2]
</code></pre>
<p>The current implementation uses a more sophisticated <strong>graduated dampening</strong> approach that considers all three factors (repetition, entropy, branch similarity) with separate thresholds and ranges for each. The test suite references Spec 68 to verify backward compatibility with the original behavior.</p>
<h4 id="when-dampening-applies"><a class="header" href="#when-dampening-applies">When Dampening Applies</a></h4>
<p>Dampening is applied based on multiple thresholds:</p>
<ul>
<li><strong>Pattern Repetition</strong>: Values approaching 1.0 trigger dampening (high repetition detected)</li>
<li><strong>Token Entropy</strong>: Values below 0.4 trigger graduated dampening (low variety)</li>
<li><strong>Branch Similarity</strong>: Values above 0.8 trigger dampening (similar branches)</li>
</ul>
<h4 id="graduated-dampening-formula"><a class="header" href="#graduated-dampening-formula">Graduated Dampening Formula</a></h4>
<p>Each factor is dampened individually using a graduated calculation:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Simplified version - actual implementation in src/complexity/entropy.rs:185-195
fn calculate_dampening_factor(
    repetition: f64,     // 0.0-1.0
    entropy: f64,        // 0.0-1.0
    branch_similarity: f64  // 0.0-1.0
) -&gt; f64 {
    let repetition_factor = graduated_dampening(repetition, threshold=1.0, max_reduction=0.20);
    let entropy_factor = graduated_dampening(entropy, threshold=0.4, max_reduction=0.15);
    let branch_factor = graduated_dampening(branch_similarity, threshold=0.8, max_reduction=0.25);

    (repetition_factor * entropy_factor * branch_factor).max(0.7)  // Never reduce below 70%
}
<span class="boring">}</span></code></pre></pre>
<p><strong>Key Parameters</strong> (hardcoded in implementation):</p>
<ul>
<li><strong>Repetition</strong>: Threshold 1.0, max 20% reduction</li>
<li><strong>Entropy</strong>: Threshold 0.4, max 15% reduction</li>
<li><strong>Branch Similarity</strong>: Threshold 0.8, max 25% reduction</li>
<li><strong>Combined Floor</strong>: Minimum 70% of original complexity preserved</li>
</ul>
<h4 id="example-repetitive-validation-function"><a class="header" href="#example-repetitive-validation-function">Example: Repetitive Validation Function</a></h4>
<pre><code>Raw Complexity: 20
Pattern Repetition: 0.95 (very high)
Token Entropy: 0.3 (low variety)
Branch Similarity: 0.9 (very similar branches)

repetition_factor ≈ 0.85 (15% reduction)
entropy_factor ≈ 0.90 (10% reduction)
branch_factor ≈ 0.80 (20% reduction)

dampening_factor = (0.85 × 0.90 × 0.80) = 0.612
dampening_factor = max(0.612, 0.7) = 0.7  // Floor applied

Effective Complexity = 20 × 0.7 = 14

Result: 30% reduction (maximum allowed)
</code></pre>
<h4 id="example-diverse-state-machine"><a class="header" href="#example-diverse-state-machine">Example: Diverse State Machine</a></h4>
<pre><code>Raw Complexity: 20
Pattern Repetition: 0.2 (low - not repetitive)
Token Entropy: 0.8 (high variety)
Branch Similarity: 0.3 (diverse branches)

repetition_factor ≈ 1.0 (no reduction)
entropy_factor ≈ 1.0 (no reduction)
branch_factor ≈ 1.0 (no reduction)

dampening_factor = (1.0 × 1.0 × 1.0) = 1.0

Effective Complexity = 20 × 1.0 = 20

Result: 0% reduction (complexity preserved)
</code></pre>
<h2 id="real-world-examples"><a class="header" href="#real-world-examples">Real-World Examples</a></h2>
<h3 id="example-1-validation-function"><a class="header" href="#example-1-validation-function">Example 1: Validation Function</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn validate_config(config: &amp;Config) -&gt; Result&lt;()&gt; {
    if config.output_dir.is_none() {
        return Err(anyhow!("output_dir required"));
    }
    if config.max_workers.is_none() {
        return Err(anyhow!("max_workers required"));
    }
    if config.timeout_secs.is_none() {
        return Err(anyhow!("timeout_secs required"));
    }
    // ... 17 more similar checks
    Ok(())
}
<span class="boring">}</span></code></pre></pre>
<p><strong>Traditional analysis:</strong></p>
<ul>
<li>Cyclomatic Complexity: 20</li>
<li>Assessment: CRITICAL</li>
</ul>
<p><strong>Entropy analysis:</strong></p>
<ul>
<li>Shannon Entropy: 0.3 (low variety)</li>
<li>Pattern Repetition: 0.9 (highly repetitive)</li>
<li>Branch Similarity: 0.95 (nearly identical)</li>
<li>Effective Complexity: 5</li>
<li>Assessment: LOW PRIORITY</li>
</ul>
<h3 id="example-2-state-machine-logic"><a class="header" href="#example-2-state-machine-logic">Example 2: State Machine Logic</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn reconcile_state(current: &amp;State, desired: &amp;State) -&gt; Vec&lt;Action&gt; {
    let mut actions = vec![];

    match (current.mode, desired.mode) {
        (Mode::Active, Mode::Standby) =&gt; {
            if current.has_active_connections() {
                actions.push(Action::DrainConnections);
                actions.push(Action::WaitForDrain);
            }
            actions.push(Action::TransitionToStandby);
        }
        (Mode::Standby, Mode::Active) =&gt; {
            if desired.requires_warmup() {
                actions.push(Action::Warmup);
            }
            actions.push(Action::TransitionToActive);
        }
        // ... more diverse state transitions
        _ =&gt; {}
    }

    actions
}
<span class="boring">}</span></code></pre></pre>
<p><strong>Traditional analysis:</strong></p>
<ul>
<li>Cyclomatic Complexity: 8</li>
<li>Assessment: MODERATE</li>
</ul>
<p><strong>Entropy analysis:</strong></p>
<ul>
<li>Shannon Entropy: 0.85 (high variety)</li>
<li>Pattern Repetition: 0.2 (not repetitive)</li>
<li>Branch Similarity: 0.3 (diverse branches)</li>
<li>Effective Complexity: 9</li>
<li>Assessment: HIGH PRIORITY</li>
</ul>
<h2 id="configuration"><a class="header" href="#configuration">Configuration</a></h2>
<p>Configure entropy analysis in <code>.debtmap.toml</code>:</p>
<pre><code class="language-toml">[entropy]
# Enable entropy analysis (default: true)
enabled = true

# Weight of entropy in overall complexity scoring (0.0-1.0, default: 1.0)
# Note: This affects scoring, not dampening thresholds
weight = 1.0

# Minimum tokens required for entropy calculation (default: 20)
min_tokens = 20

# Pattern similarity threshold for repetition detection (0.0-1.0, default: 0.7)
pattern_threshold = 0.7

# Enable advanced token classification (default: false for backward compatibility)
# When true, weights tokens by semantic importance (control flow &gt; operators &gt; identifiers)
use_classification = false

# Branch similarity threshold (0.0-1.0, default: 0.8)
# Branches with similarity above this threshold contribute to dampening
branch_threshold = 0.8

# Maximum reduction limits (these are configurable)
max_repetition_reduction = 0.20  # Max 20% reduction from pattern repetition
max_entropy_reduction = 0.15     # Max 15% reduction from low token entropy
max_branch_reduction = 0.25      # Max 25% reduction from branch similarity
max_combined_reduction = 0.30    # Overall cap at 30% reduction (minimum 70% preserved)
</code></pre>
<p><strong>Important Notes:</strong></p>
<ol>
<li>
<p><strong>Graduated dampening thresholds are hardcoded</strong> in the implementation (<code>src/complexity/entropy.rs:185-195</code>):</p>
<ul>
<li>Entropy threshold: 0.4 (not configurable via <code>entropy_threshold</code>)</li>
<li>Branch threshold: 0.8 (configured via <code>branch_threshold</code>)</li>
<li>Repetition threshold: 1.0 (via <code>pattern_threshold</code>)</li>
</ul>
</li>
<li>
<p><strong>The <code>weight</code> parameter</strong> affects how entropy scores contribute to overall complexity scoring, but does not change the dampening thresholds or reductions.</p>
</li>
<li>
<p><strong>Token classification</strong> defaults to <code>false</code> (disabled) for backward compatibility, even though it provides more accurate entropy analysis when enabled.</p>
</li>
</ol>
<h3 id="tuning-for-your-project"><a class="header" href="#tuning-for-your-project">Tuning for Your Project</a></h3>
<p><strong>Enable token classification for better accuracy:</strong></p>
<pre><code class="language-toml">[entropy]
enabled = true
use_classification = true  # Weight control flow keywords more heavily
</code></pre>
<p><strong>Strict mode (fewer reductions, flag more code):</strong></p>
<pre><code class="language-toml">[entropy]
enabled = true
max_repetition_reduction = 0.10  # Reduce from default 0.20
max_entropy_reduction = 0.08     # Reduce from default 0.15
max_branch_reduction = 0.12      # Reduce from default 0.25
max_combined_reduction = 0.20    # Reduce from default 0.30 (preserve 80%)
</code></pre>
<p><strong>Lenient mode (more aggressive reduction):</strong></p>
<pre><code class="language-toml">[entropy]
enabled = true
max_repetition_reduction = 0.30  # Increase from default 0.20
max_entropy_reduction = 0.25     # Increase from default 0.15
max_branch_reduction = 0.35      # Increase from default 0.25
max_combined_reduction = 0.50    # Increase from default 0.30 (preserve 50%)
</code></pre>
<p><strong>Disable entropy dampening entirely:</strong></p>
<pre><code class="language-toml">[entropy]
enabled = false
</code></pre>
<p>Or via CLI (disables entropy-based complexity adjustments):</p>
<pre><code class="language-bash"># Disables semantic analysis features including entropy dampening
debtmap analyze . --semantic-off
</code></pre>
<p><strong>Note</strong>: The <code>--semantic-off</code> flag disables all semantic analysis features, including entropy-based complexity adjustments. This is useful when you want raw cyclomatic complexity without any dampening.</p>
<h2 id="understanding-the-impact"><a class="header" href="#understanding-the-impact">Understanding the Impact</a></h2>
<h3 id="measuring-false-positive-reduction"><a class="header" href="#measuring-false-positive-reduction">Measuring False Positive Reduction</a></h3>
<p>Run analysis with and without entropy:</p>
<pre><code class="language-bash"># Without entropy
debtmap analyze . --semantic-off --top 20 &gt; without_entropy.txt

# With entropy (default)
debtmap analyze . --top 20 &gt; with_entropy.txt

# Compare
diff without_entropy.txt with_entropy.txt
</code></pre>
<p><strong>Expected results:</strong></p>
<ul>
<li>60-75% reduction in flagged validation functions</li>
<li>40-50% reduction in flagged dispatcher functions</li>
<li>20-30% reduction in flagged configuration parsers</li>
<li>No reduction in genuinely complex state machines or business logic</li>
</ul>
<h3 id="verifying-correctness"><a class="header" href="#verifying-correctness">Verifying Correctness</a></h3>
<p>Entropy analysis should:</p>
<ul>
<li><strong>Reduce</strong> flags on repetitive code (validators, dispatchers)</li>
<li><strong>Preserve</strong> flags on genuinely complex code (state machines, business logic)</li>
</ul>
<p>If entropy analysis incorrectly reduces flags on genuinely complex code, adjust configuration:</p>
<pre><code class="language-toml">[entropy]
max_combined_reduction = 0.20  # Reduce from default 0.30 (preserve 80%)
max_repetition_reduction = 0.10  # Reduce individual factors
max_entropy_reduction = 0.08
max_branch_reduction = 0.12
</code></pre>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<ol>
<li><strong>Use default settings</strong> - They work well for most projects</li>
<li><strong>Verify results</strong> - Spot-check top-priority items to ensure correctness</li>
<li><strong>Tune conservatively</strong> - Start with default settings, adjust if needed</li>
<li><strong>Disable for debugging</strong> - Use <code>--semantic-off</code> if entropy seems incorrect</li>
<li><strong>Report issues</strong> - If entropy incorrectly flags code, report it</li>
</ol>
<h2 id="limitations"><a class="header" href="#limitations">Limitations</a></h2>
<p>Entropy analysis works best for:</p>
<ul>
<li>Functions with cyclomatic complexity 10-50</li>
<li>Code with clear repetitive patterns</li>
<li>Validation, dispatch, and configuration functions</li>
</ul>
<p>Entropy analysis is less effective for:</p>
<ul>
<li>Very simple functions (complexity &lt; 5)</li>
<li>Very complex functions (complexity &gt; 100)</li>
<li>Obfuscated or generated code</li>
</ul>
<h2 id="comparison-with-other-approaches"><a class="header" href="#comparison-with-other-approaches">Comparison with Other Approaches</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Approach</th><th>False Positive Rate</th><th>Complexity</th><th>Speed</th></tr></thead><tbody>
<tr><td>Raw Cyclomatic Complexity</td><td>High (many false positives)</td><td>Low</td><td>Fast</td></tr>
<tr><td>Cognitive Complexity</td><td>Medium</td><td>Medium</td><td>Medium</td></tr>
<tr><td>Entropy Analysis (Debtmap)</td><td>Low</td><td>High</td><td>Fast</td></tr>
<tr><td>Manual Code Review</td><td>Very Low</td><td>Very High</td><td>Very Slow</td></tr>
</tbody></table>
</div>
<p>Debtmap’s entropy analysis provides the best balance of accuracy and speed.</p>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<ul>
<li><a href="why-debtmap.html">Why Debtmap?</a> - Real-world examples of entropy analysis</li>
<li><a href="analysis-guide.html">Analysis Guide</a> - General analysis concepts</li>
<li><a href="configuration.html">Configuration</a> - Complete configuration reference</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="design-patterns.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="error-handling-analysis.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="design-patterns.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="error-handling-analysis.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
