<!DOCTYPE HTML>
<html lang="en" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Troubleshooting - Debtmap Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Comprehensive guide to Debtmap code complexity and technical debt analyzer">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-0e79105b.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-c7b19542.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Debtmap Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/iepathos/debtmap" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h1>
<p>Common issues and solutions for using debtmap effectively.</p>
<h2 id="quick-fixes-for-common-issues"><a class="header" href="#quick-fixes-for-common-issues">Quick Fixes for Common Issues</a></h2>
<p>If you’re experiencing problems, try these first:</p>
<ol>
<li><strong>Analysis is slow</strong>: Adjust threads with <code>--jobs</code>, use <code>--no-multi-pass</code> for faster single-pass analysis, or use <code>--semantic-off</code> for faster fallback mode</li>
<li><strong>Parse errors</strong>: Use <code>--semantic-off</code> for faster fallback mode or exclude problematic files</li>
<li><strong>No output</strong>: Increase verbosity with <code>-v</code> or lower <code>--min-priority</code></li>
<li><strong>Inconsistent results</strong>: Check if coverage file changed or context providers are enabled</li>
</ol>
<h2 id="common-issues"><a class="header" href="#common-issues">Common Issues</a></h2>
<h3 id="parse-errors"><a class="header" href="#parse-errors">Parse Errors</a></h3>
<p><strong>Problem</strong>: Encountering “Parse error in file:line:column” messages</p>
<p><strong>Causes</strong>:</p>
<ul>
<li>Unsupported language syntax or version</li>
<li>Complex macro expansions (Rust)</li>
<li>Type inference edge cases (Python, TypeScript)</li>
</ul>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Try fallback mode without semantic analysis
debtmap --semantic-off

# For Rust macro issues, see detailed warnings
debtmap --verbose-macro-warnings --show-macro-stats

# Exclude specific problematic files
# Add to .debtmap/config.toml:
# exclude = ["path/to/problematic/file.rs"]
</code></pre>
<h3 id="out-of-memory-errors"><a class="header" href="#out-of-memory-errors">Out of Memory Errors</a></h3>
<p><strong>Problem</strong>: Analysis crashes or runs out of memory on large codebases</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Limit parallel processing
debtmap --jobs 2

# Disable parallel processing entirely
debtmap --no-parallel

# Test with limited files first
debtmap --max-files 100

# Analyze subdirectories separately
debtmap path/to/subset
</code></pre>
<h3 id="performance-issues"><a class="header" href="#performance-issues">Performance Issues</a></h3>
<p><strong>Problem</strong>: Analysis takes too long to complete</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Use all available CPU cores
debtmap --jobs 0

# Disable multi-pass analysis for faster single-pass (slightly less detailed)
debtmap --no-multi-pass

# Try faster fallback mode (less accurate)
debtmap --semantic-off

# Use plain output for faster terminal rendering
debtmap --plain

# Or set environment variable to disable multi-pass globally
export DEBTMAP_SINGLE_PASS=1
</code></pre>
<p>See <a href="#performance-tips">Performance Tips</a> for detailed optimization strategies.</p>
<h3 id="file-permission-errors"><a class="header" href="#file-permission-errors">File Permission Errors</a></h3>
<p><strong>Problem</strong>: “File system error” when accessing files</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Ensure you have read permissions for all source files</li>
<li>Check that the project directory is accessible</li>
</ul>
<h3 id="git-history-errors"><a class="header" href="#git-history-errors">Git History Errors</a></h3>
<p><strong>Problem</strong>: Errors when using <code>git_history</code> context provider</p>
<p><strong>Causes</strong>:</p>
<ul>
<li>Not running in a git repository</li>
<li>Git history not available for files</li>
<li>Insufficient git permissions</li>
</ul>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Disable git_history context provider
debtmap --context --disable-context git_history

# Disable all context providers
debtmap --no-context-aware

# Check if in git repository
git status
</code></pre>
<h3 id="coverage-file-issues"><a class="header" href="#coverage-file-issues">Coverage File Issues</a></h3>
<p><strong>Problem</strong>: Coverage file not being processed or causing errors</p>
<p><strong>Causes</strong>:</p>
<ul>
<li>Non-LCOV format coverage file</li>
<li>Malformed coverage data</li>
<li>Path mismatches between coverage and source files</li>
</ul>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Verify coverage file format (must be LCOV)
head coverage.info

# Check coverage file path
debtmap --coverage-file path/to/coverage.info -v

# Ensure paths in coverage file match source paths
# Coverage paths are relative to project root
</code></pre>
<h3 id="debugging-coverage-matching-with-explain-coverage"><a class="header" href="#debugging-coverage-matching-with-explain-coverage">Debugging Coverage Matching with explain-coverage</a></h3>
<p>The <code>explain-coverage</code> command helps diagnose coverage file parsing and function name matching issues.</p>
<p><strong>Use cases</strong>:</p>
<ul>
<li>Coverage data not being applied to functions</li>
<li>Function name mismatches between coverage and source</li>
<li>Verifying coverage file format is correct</li>
<li>Understanding which functions have coverage data</li>
</ul>
<p><strong>Basic Usage</strong>:</p>
<pre><code class="language-bash"># Debug coverage data parsing for a specific function
debtmap explain-coverage . \
  --coverage-file coverage.lcov \
  --function "process_file"

# See detailed function matching diagnostics
debtmap explain-coverage . \
  --coverage-file coverage.lcov \
  --function "process_file" \
  -v

# Narrow search to specific file
debtmap explain-coverage . \
  --coverage-file coverage.lcov \
  --function "calculate_score" \
  --file src/scoring.rs

# Get JSON output for automation
debtmap explain-coverage . \
  --coverage-file coverage.lcov \
  --function "process_file" \
  --format json
</code></pre>
<p><strong>Output Format</strong>:</p>
<p>The command shows:</p>
<ul>
<li>Whether coverage was found for the function</li>
<li>Which matching strategy succeeded (exact_match, suffix_match, method_name_match, etc.)</li>
<li>Coverage percentage if found</li>
<li>All attempted matching strategies (with <code>-v</code>)</li>
<li>Available functions in coverage file that partially match your query</li>
</ul>
<p><strong>Example Output</strong>:</p>
<pre><code>Coverage Detection Explanation
==============================

Function: process_file
File: src/processor.rs

✓ Coverage Found!
  Strategy: suffix_match
  Coverage: 87.5%

Matching Attempts:
------------------
  ✗ exact_match
  ✓ suffix_match
      File: src/processor.rs
      Function: process_file
      Coverage: 87.5%
</code></pre>
<p><strong>Common Issues Diagnosed</strong>:</p>
<p><strong>Q: Function not found in coverage data?</strong></p>
<p>A: The explain-coverage command will show available functions:</p>
<pre><code class="language-bash">debtmap explain-coverage . \
  --coverage-file coverage.lcov \
  --function "my_function" \
  -v

# Output shows:
#   Available Functions in LCOV (143 total):
#   --------------------------------------
#     Functions containing 'my_function':
#       - src/module.rs::my_function_impl
#       - src/other.rs::my_function_v2
</code></pre>
<p><strong>Q: Path mismatches between source and coverage?</strong></p>
<p>A: Use <code>-v</code> to see all path matching strategies:</p>
<pre><code class="language-bash">debtmap explain-coverage . \
  --coverage-file coverage.lcov \
  --function "process_file" \
  --file src/processor.rs \
  -v

# Shows which strategies were tried:
#   ✗ exact_match (src/processor.rs)
#   ✓ suffix_match (./src/processor.rs)
#   - normalized_path_match
</code></pre>
<p><strong>Q: Function names don’t match between coverage and source?</strong></p>
<p>A: The command tries multiple matching strategies:</p>
<ul>
<li><strong>exact_match</strong>: Exact function name and file path</li>
<li><strong>suffix_match</strong>: File path suffix matching</li>
<li><strong>method_name_match</strong>: Method name without module prefix</li>
<li><strong>normalized_path_match</strong>: Normalized path comparison</li>
<li><strong>global_function_name_match</strong>: Search across all files</li>
<li><strong>global_method_name_match</strong>: Method name search across all files</li>
</ul>
<pre><code class="language-bash"># See which strategy would work
debtmap explain-coverage . \
  --coverage-file coverage.lcov \
  --function "MyStruct::method_name" \
  -v
</code></pre>
<p><strong>Integration with Analysis</strong>:</p>
<p>After diagnosing issues with explain-coverage, fix them and re-run analysis:</p>
<pre><code class="language-bash"># Diagnose coverage issues
debtmap explain-coverage . \
  --coverage-file coverage.lcov \
  --function "problematic_function" \
  -v

# Fix coverage paths or function names based on output

# Run full analysis with coverage
debtmap --coverage-file coverage.lcov -v
</code></pre>
<p>See <a href="./cli-reference.html#explain-coverage-debugging">CLI Reference - explain-coverage</a> for complete flag documentation.</p>
<h3 id="threshold-and-preset-confusion"><a class="header" href="#threshold-and-preset-confusion">Threshold and Preset Confusion</a></h3>
<p><strong>Problem</strong>: Unexpected filtering or priority levels</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Check what threshold preset does
debtmap --threshold-preset strict --help

# Override specific thresholds
debtmap --min-priority 3

# See all items regardless of thresholds
debtmap --min-priority 0

# Use category filters instead
debtmap --filter "complexity,debt"
</code></pre>
<h3 id="json-format-issues"><a class="header" href="#json-format-issues">JSON Format Issues</a></h3>
<p><strong>Problem</strong>: JSON output parsing errors or unexpected structure</p>
<p><strong>Understanding the Two Formats</strong>:</p>
<p><strong>Legacy format</strong> wraps items in variant-specific objects:</p>
<pre><code class="language-json">{"File": {"path": "src/main.rs", "score": 7.5, ...}}
{"Function": {"name": "parse", "score": 8.2, ...}}
</code></pre>
<p><strong>Unified format</strong> uses consistent structure with <code>type</code> field:</p>
<pre><code class="language-json">{"type": "File", "path": "src/main.rs", "score": 7.5, ...}
{"type": "Function", "name": "parse", "score": 8.2, ...}
</code></pre>
<p>The unified format is <strong>recommended</strong> for parsing and tool integration as it provides a consistent structure across all item types.</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Use unified JSON format (consistent structure, recommended)
debtmap --format json --output-format unified

# Legacy format (default, uses {File: {...}} structure)
debtmap --format json --output-format legacy

# Validate JSON output
debtmap --format json | jq .

# Write to file for easier inspection
debtmap --format json --output results.json
</code></pre>
<p>See the <a href="./output-formats.html">Output Formats</a> chapter for detailed JSON structure documentation.</p>
<h3 id="context-provider-errors"><a class="header" href="#context-provider-errors">Context Provider Errors</a></h3>
<p><strong>Problem</strong>: Errors with critical_path, dependency, or git_history providers</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Enable specific providers only
debtmap --context --context-providers critical_path,dependency

# Disable problematic provider
debtmap --context --disable-context git_history

# Disable context-aware filtering
debtmap --no-context-aware

# Check context provider details
debtmap --context -vvv
</code></pre>
<p>See <a href="#context-provider-troubleshooting">Context Provider Troubleshooting</a> for details.</p>
<h2 id="debug-mode"><a class="header" href="#debug-mode">Debug Mode</a></h2>
<p>Use verbosity flags to diagnose issues and understand analysis behavior.</p>
<h3 id="verbosity-levels"><a class="header" href="#verbosity-levels">Verbosity Levels</a></h3>
<pre><code class="language-bash"># Level 1: Show main score factors
debtmap -v

# Level 2: Show detailed calculations
debtmap -vv

# Level 3: Show all debug information
debtmap -vvv
</code></pre>
<p><strong>What each level shows</strong>:</p>
<ul>
<li><code>-v</code>: Score breakdowns, main contributing factors</li>
<li><code>-vv</code>: Detailed metric calculations, file processing</li>
<li><code>-vvv</code>: Full debug output, context provider details</li>
</ul>
<h3 id="diagnostic-options"><a class="header" href="#diagnostic-options">Diagnostic Options</a></h3>
<pre><code class="language-bash"># Show macro parsing warnings (Rust)
debtmap --verbose-macro-warnings

# Show macro expansion statistics (Rust)
debtmap --show-macro-stats

# Disable semantic analysis (fallback mode)
debtmap --semantic-off

# Validate LOC consistency
debtmap --validate-loc
</code></pre>
<p><strong>Note</strong>: The <code>--explain-score</code> flag has been deprecated in favor of granular verbosity levels (<code>-v</code>, <code>-vv</code>, <code>-vvv</code>). The new verbosity system provides:</p>
<ul>
<li>Better control over output detail level</li>
<li>Consistent debugging across all commands</li>
<li>Progressive information disclosure (level 1 → 2 → 3)</li>
</ul>
<p>Use <code>-v</code> for score breakdowns, <code>-vv</code> for detailed calculations, and <code>-vvv</code> for full debug output.</p>
<h3 id="debugging-score-calculations"><a class="header" href="#debugging-score-calculations">Debugging Score Calculations</a></h3>
<pre><code class="language-bash"># Use verbosity levels to see score breakdown
debtmap -v    # Shows score factors

# See how coverage affects scores
debtmap --coverage-file coverage.info -v

# See how context affects scores
debtmap --context --context-providers critical_path -v
</code></pre>
<h3 id="example-debug-session"><a class="header" href="#example-debug-session">Example Debug Session</a></h3>
<pre><code class="language-bash"># Step 1: Run with verbosity to see what's happening
debtmap -vv

# Step 2: Try without semantic analysis
debtmap --semantic-off -v

# Step 3: Check specific file
debtmap path/to/file.rs -vvv

# Step 4: Validate results
debtmap --validate-loc
</code></pre>
<h2 id="performance-tips"><a class="header" href="#performance-tips">Performance Tips</a></h2>
<p>Optimize debtmap analysis speed and resource usage.</p>
<h3 id="parallel-processing"><a class="header" href="#parallel-processing">Parallel Processing</a></h3>
<pre><code class="language-bash"># Use all CPU cores (default)
debtmap --jobs 0

# Limit to 4 threads
debtmap --jobs 4

# Disable parallel processing (debugging)
# Note: --no-parallel is equivalent to --jobs 1 (single-threaded)
debtmap --no-parallel
</code></pre>
<p><strong>When to adjust parallelism</strong>:</p>
<ul>
<li><strong>Use <code>--jobs 0</code></strong> (default): Maximum performance on dedicated machine</li>
<li><strong>Use <code>--jobs N</code></strong>: Limit resource usage while other tasks run</li>
<li><strong>Use <code>--no-parallel</code></strong>: Debugging concurrency issues</li>
</ul>
<h3 id="analysis-optimizations"><a class="header" href="#analysis-optimizations">Analysis Optimizations</a></h3>
<pre><code class="language-bash"># Faster: disable multi-pass analysis (single-pass mode)
debtmap --no-multi-pass

# Fast mode: disable semantic analysis
debtmap --semantic-off

# Plain output: faster terminal rendering
debtmap --plain

# Limit files for testing
debtmap --max-files 100

# Analyze subdirectory only
debtmap src/specific/module

# Reduce output with filters
debtmap --min-priority 4 --top 20
</code></pre>
<h3 id="performance-comparison"><a class="header" href="#performance-comparison">Performance Comparison</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Configuration</th><th>Speed</th><th>Accuracy</th></tr>
</thead>
<tbody>
<tr><td>Default (multi-pass)</td><td>Fast</td><td>Highest</td></tr>
<tr><td><code>--no-multi-pass</code></td><td>Faster</td><td>High</td></tr>
<tr><td><code>--semantic-off</code></td><td>Fastest</td><td>Medium</td></tr>
<tr><td><code>--no-parallel</code></td><td>Slowest</td><td>High</td></tr>
<tr><td><code>--jobs 4</code></td><td>Medium</td><td>High</td></tr>
</tbody>
</table>
</div>
<h3 id="monitoring-performance"><a class="header" href="#monitoring-performance">Monitoring Performance</a></h3>
<pre><code class="language-bash"># Time analysis
time debtmap

# Profile with verbosity
debtmap -vv 2&gt;&amp;1 | grep "processed in"
</code></pre>
<h2 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h2>
<p>Debtmap supports various environment variables for configuring behavior without command-line flags.</p>
<h3 id="analysis-feature-flags"><a class="header" href="#analysis-feature-flags">Analysis Feature Flags</a></h3>
<pre><code class="language-bash"># Enable context-aware analysis by default
export DEBTMAP_CONTEXT_AWARE=true

# Enable functional analysis by default
export DEBTMAP_FUNCTIONAL_ANALYSIS=true
</code></pre>
<h3 id="automation-and-cicd-variables"><a class="header" href="#automation-and-cicd-variables">Automation and CI/CD Variables</a></h3>
<pre><code class="language-bash"># Enable automation-friendly output (used by Prodigy)
export PRODIGY_AUTOMATION=true

# Enable validation mode (stricter checks)
export PRODIGY_VALIDATION=true
</code></pre>
<h3 id="output-customization"><a class="header" href="#output-customization">Output Customization</a></h3>
<pre><code class="language-bash"># Disable emoji in output
export NO_EMOJI=1

# Force plain text output (no colors)
export NO_COLOR=1
</code></pre>
<h3 id="usage-examples"><a class="header" href="#usage-examples">Usage Examples</a></h3>
<pre><code class="language-bash"># Enable context-aware analysis by default
echo 'export DEBTMAP_CONTEXT_AWARE=true' &gt;&gt; ~/.bashrc

# CI/CD environment setup
export NO_EMOJI=1
export NO_COLOR=1
export PRODIGY_AUTOMATION=true

# Run analysis with environment settings
debtmap

# Override environment with flags
DEBTMAP_CONTEXT_AWARE=false debtmap --context  # Flag takes precedence
</code></pre>
<h3 id="precedence-rules"><a class="header" href="#precedence-rules">Precedence Rules</a></h3>
<p>When both environment variables and CLI flags are present:</p>
<ol>
<li><strong>CLI flags take precedence</strong> over environment variables</li>
<li><strong>Environment variables override</strong> config file defaults</li>
<li><strong>Config file settings override</strong> built-in defaults</li>
</ol>
<h3 id="troubleshooting-environment-variables"><a class="header" href="#troubleshooting-environment-variables">Troubleshooting Environment Variables</a></h3>
<pre><code class="language-bash"># Test with specific environment
env DEBTMAP_CONTEXT_AWARE=true debtmap -v

# See all debtmap-related environment variables
env | grep -i debtmap
env | grep -i prodigy
</code></pre>
<h2 id="context-provider-troubleshooting"><a class="header" href="#context-provider-troubleshooting">Context Provider Troubleshooting</a></h2>
<p>Diagnose and fix issues with context providers (critical_path, dependency, git_history).</p>
<h3 id="enable-context-analysis"><a class="header" href="#enable-context-analysis">Enable Context Analysis</a></h3>
<pre><code class="language-bash"># Enable with default providers
debtmap --context

# Or use explicit flag
debtmap --enable-context

# Specify specific providers
debtmap --context --context-providers critical_path,dependency,git_history
</code></pre>
<h3 id="disable-specific-providers"><a class="header" href="#disable-specific-providers">Disable Specific Providers</a></h3>
<pre><code class="language-bash"># Disable git_history only
debtmap --context --disable-context git_history

# Disable multiple providers
debtmap --context --disable-context git_history,dependency

# Disable context-aware filtering
debtmap --no-context-aware
</code></pre>
<h3 id="git-history-provider-issues"><a class="header" href="#git-history-provider-issues">Git History Provider Issues</a></h3>
<p><strong>Problem</strong>: “Git history error” when running analysis</p>
<p><strong>Causes</strong>:</p>
<ul>
<li>Not in a git repository</li>
<li>No git history for files</li>
<li>Git not installed or accessible</li>
</ul>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Verify in git repository
git status

# Disable git_history provider
debtmap --context --disable-context git_history

# Initialize git repo if needed
git init
</code></pre>
<h3 id="dependency-provider-issues"><a class="header" href="#dependency-provider-issues">Dependency Provider Issues</a></h3>
<p><strong>Problem</strong>: “Dependency error” or incomplete dependency graph</p>
<p><strong>Causes</strong>:</p>
<ul>
<li>Complex import structures</li>
<li>Circular dependencies</li>
<li>Unsupported dependency patterns</li>
</ul>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Disable dependency provider
debtmap --context --disable-context dependency

# Try with verbosity to see details
debtmap --context -vvv

# Use without context
debtmap
</code></pre>
<h3 id="critical-path-provider-issues"><a class="header" href="#critical-path-provider-issues">Critical Path Provider Issues</a></h3>
<p><strong>Problem</strong>: Critical path analysis fails or produces unexpected results</p>
<p><strong>Causes</strong>:</p>
<ul>
<li>Invalid call graph</li>
<li>Missing function definitions</li>
<li>Complex control flow</li>
</ul>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Disable critical_path provider
debtmap --context --disable-context critical_path

# Try with semantic analysis disabled
debtmap --context --semantic-off

# Debug with verbosity
debtmap --context --context-providers critical_path -vvv
</code></pre>
<h3 id="context-impact-on-scoring"><a class="header" href="#context-impact-on-scoring">Context Impact on Scoring</a></h3>
<p>Context providers add additional risk factors to scoring:</p>
<pre><code class="language-bash"># See context contribution to scores
debtmap --context -v

# Compare with and without context
debtmap --output baseline.json
debtmap --context --output with_context.json
debtmap compare --before baseline.json --after with_context.json
</code></pre>
<h3 id="performance-impact"><a class="header" href="#performance-impact">Performance Impact</a></h3>
<p>Context analysis adds processing overhead:</p>
<pre><code class="language-bash"># Faster: no context
debtmap

# Slower: with all context providers
debtmap --context --context-providers critical_path,dependency,git_history

# Medium: selective providers
debtmap --context --context-providers dependency
</code></pre>
<h3 id="debug-context-providers"><a class="header" href="#debug-context-providers">Debug Context Providers</a></h3>
<pre><code class="language-bash"># See detailed context provider output
debtmap --context -vvv

# Check which providers are active
debtmap --context -v | grep "context provider"
</code></pre>
<h2 id="advanced-analysis-troubleshooting"><a class="header" href="#advanced-analysis-troubleshooting">Advanced Analysis Troubleshooting</a></h2>
<p>Advanced CLI flags for specialized analysis scenarios.</p>
<h3 id="multi-pass-analysis"><a class="header" href="#multi-pass-analysis">Multi-Pass Analysis</a></h3>
<p>Multi-pass analysis is <strong>enabled by default</strong> and performs two iterations (raw and normalized) to distinguish logical complexity from formatting artifacts.</p>
<pre><code class="language-bash"># Multi-pass analysis runs by default
debtmap analyze .

# Disable for performance-critical scenarios
debtmap --no-multi-pass

# Or use environment variable
export DEBTMAP_SINGLE_PASS=1
debtmap analyze .
</code></pre>
<p><strong>When to disable (<code>--no-multi-pass</code>)</strong>:</p>
<ul>
<li>Performance-critical CI/CD pipelines</li>
<li>Very large codebases (&gt;100k LOC)</li>
<li>Quick complexity checks during development</li>
<li>When formatting is already standardized</li>
</ul>
<h3 id="attribution-output"><a class="header" href="#attribution-output">Attribution Output</a></h3>
<p><strong>Flag</strong>: <code>--show-attribution</code></p>
<p>Shows attribution information for detected issues.</p>
<pre><code class="language-bash"># Enable attribution output
debtmap --show-attribution

# Combine with verbosity for details
debtmap --show-attribution -v
</code></pre>
<p><strong>Troubleshooting</strong>:</p>
<ul>
<li>Requires git history provider for author information</li>
<li>May slow down analysis</li>
<li>Use <code>--disable-context git_history</code> if causing errors</li>
</ul>
<h3 id="aggregation-methods"><a class="header" href="#aggregation-methods">Aggregation Methods</a></h3>
<p><strong>Flag</strong>: <code>--aggregation-method &lt;method&gt;</code></p>
<p>Controls how results are aggregated across files.</p>
<pre><code class="language-bash"># Available aggregation methods:
debtmap --aggregation-method weighted_sum  # (default)
debtmap --aggregation-method sum
debtmap --aggregation-method logarithmic_sum
debtmap --aggregation-method max_plus_average
</code></pre>
<p><strong>Common issues</strong>:</p>
<ul>
<li>Different methods produce different result structures</li>
<li>Choose method based on your reporting needs</li>
<li>Use consistent method for comparison over time</li>
</ul>
<h3 id="minimum-problematic-threshold"><a class="header" href="#minimum-problematic-threshold">Minimum Problematic Threshold</a></h3>
<p><strong>Flag</strong>: <code>--min-problematic &lt;number&gt;</code></p>
<p>Sets the minimum score for an item to be considered problematic.</p>
<pre><code class="language-bash"># Default threshold
debtmap --min-problematic 3

# More strict (show more issues)
debtmap --min-problematic 1

# Less strict (show only serious issues)
debtmap --min-problematic 5
</code></pre>
<p><strong>Relationship to other filters</strong>:</p>
<ul>
<li>Works alongside <code>--min-priority</code></li>
<li>Filters at analysis level vs display level</li>
<li>Lower values = more issues shown</li>
</ul>
<h3 id="god-object-detection"><a class="header" href="#god-object-detection">God Object Detection</a></h3>
<p><strong>Flag</strong>: <code>--no-god-object</code></p>
<p>Disables god object (large class/module) detection.</p>
<p><strong>God Object Types</strong>:</p>
<p>Debtmap distinguishes three types of god objects:</p>
<ol>
<li>
<p><strong>god_class</strong>: Files with excessive complexity excluding test functions</p>
<ul>
<li>Focuses on production code complexity</li>
<li>Ignores test helper functions and test cases</li>
<li>Best indicator of production code quality issues</li>
</ul>
</li>
<li>
<p><strong>god_file</strong>: Files with excessive complexity including all functions</p>
<ul>
<li>Considers both production and test code</li>
<li>Useful for understanding total file complexity</li>
<li>Alias: <code>god_module</code> (same as god_file)</li>
</ul>
</li>
<li>
<p><strong>god_module</strong>: Alias for god_file</p>
<ul>
<li>Module-level view of complexity</li>
<li>Includes all functions regardless of purpose</li>
</ul>
</li>
</ol>
<p><strong>Responsibility Analysis Metrics</strong> (Spec 140):</p>
<p>Modern god object detection includes domain responsibility analysis:</p>
<pre><code class="language-bash"># See detailed god object metrics
debtmap -vv 2&gt;&amp;1 | grep "god_object\|domain"
</code></pre>
<p><strong>Additional Metrics</strong>:</p>
<ul>
<li><strong>domain_count</strong>: Number of distinct responsibility domains in file</li>
<li><strong>domain_diversity</strong>: Measure of how varied the responsibilities are (0.0-1.0)</li>
<li><strong>struct_ratio</strong>: Ratio of structs to total file size</li>
<li><strong>cross_domain_severity</strong>: How badly domains are mixed (0.0-1.0)</li>
<li><strong>module_splits</strong>: Suggested number of modules to split into</li>
</ul>
<p><strong>Configuration</strong>:</p>
<pre><code class="language-toml"># In .debtmap.toml
[god_object]
# Thresholds for god object detection
complexity_threshold = 100
loc_threshold = 500
function_count_threshold = 20

# Responsibility analysis thresholds
domain_diversity_threshold = 0.7  # High diversity = mixed responsibilities
cross_domain_threshold = 0.6       # High value = poor separation
</code></pre>
<p><strong>Usage</strong>:</p>
<pre><code class="language-bash"># Disable god object detection entirely
debtmap --no-god-object

# See god object analysis with responsibility metrics
debtmap -vv

# Check specific file for god object patterns
debtmap path/to/large/file.rs -vv
</code></pre>
<p><strong>When to use</strong>:</p>
<ul>
<li>False positives on framework files</li>
<li>Intentional large aggregator classes</li>
<li>Reducing noise in results</li>
<li>Files that are legitimately large due to generated code</li>
</ul>
<p><strong>Understanding the Metrics</strong>:</p>
<pre><code class="language-bash"># Example output interpretation:
# domain_count = 5          → File handles 5 different concerns
# domain_diversity = 0.8    → Very mixed responsibilities (bad)
# cross_domain_severity = 0.7 → Poor separation of concerns
# module_splits = 3         → Suggest splitting into 3 modules

# High domain_diversity + high cross_domain_severity = strong god object
# Recommended: refactor into separate modules per domain
</code></pre>
<h3 id="detail-level-control"><a class="header" href="#detail-level-control">Detail Level Control</a></h3>
<p><strong>Flag</strong>: <code>--detail-level &lt;level&gt;</code></p>
<p>Controls the level of detail in analysis output.</p>
<pre><code class="language-bash"># Available detail levels:
debtmap --detail-level summary        # High-level overview only
debtmap --detail-level standard       # (default) Balanced detail
debtmap --detail-level comprehensive  # Detailed analysis
debtmap --detail-level debug         # Full debug information
</code></pre>
<p><strong>When to use</strong>:</p>
<ul>
<li><code>summary</code>: Quick overview for large codebases</li>
<li><code>standard</code>: Default, appropriate for most use cases</li>
<li><code>comprehensive</code>: Deep dive into specific issues</li>
<li><code>debug</code>: Troubleshooting analysis behavior</li>
</ul>
<h3 id="aggregation-control"><a class="header" href="#aggregation-control">Aggregation Control</a></h3>
<p><strong>Flags</strong>: <code>--aggregate-only</code>, <code>--no-aggregation</code></p>
<p>Control file-level score aggregation.</p>
<pre><code class="language-bash"># Show only aggregated file-level scores
debtmap --aggregate-only

# Disable file-level aggregation entirely
debtmap --no-aggregation

# Default: show both individual items and file aggregates
debtmap
</code></pre>
<p><strong>Use cases</strong>:</p>
<ul>
<li><code>--aggregate-only</code>: Focus on file-level technical debt</li>
<li><code>--no-aggregation</code>: See individual functions/classes only</li>
<li>Default: Full picture with both levels</li>
</ul>
<h3 id="call-graph-debugging"><a class="header" href="#call-graph-debugging">Call Graph Debugging</a></h3>
<p><strong>Overview</strong>: Debug call graph generation and analysis for dependency tracking.</p>
<p><strong>Available Flags</strong>:</p>
<pre><code class="language-bash"># Enable call graph debug output
debtmap --debug-call-graph

# Trace specific functions through call graph
debtmap --trace-functions "function_name,another_function"

# Show only call graph statistics (no detailed graph)
debtmap --call-graph-stats-only

# Control debug output format (text or json)
debtmap --debug-call-graph --debug-format text
debtmap --debug-call-graph --debug-format json

# Validate call graph consistency
debtmap --validate-call-graph
</code></pre>
<p><strong>Dependency Control Flags</strong>:</p>
<pre><code class="language-bash"># Show dependency information in results
debtmap --show-dependencies

# Hide dependency information (default in some contexts)
debtmap --no-dependencies

# Limit number of callers shown per function
debtmap --max-callers 10

# Limit number of callees shown per function
debtmap --max-callees 10

# Include external crate calls in call graph
debtmap --show-external

# Include standard library calls in call graph
debtmap --show-std-lib
</code></pre>
<p><strong>Common Issues</strong>:</p>
<p><strong>Q: Call graph shows incomplete or missing relationships?</strong></p>
<p>A: Try these debugging steps:</p>
<pre><code class="language-bash"># Enable debug output to see graph construction
debtmap --debug-call-graph -vv

# Validate the call graph consistency
debtmap --validate-call-graph

# Include external dependencies if relevant
debtmap --show-external --show-std-lib

# Trace specific functions to see their relationships
debtmap --trace-functions "my_function" -vv
</code></pre>
<p><strong>Q: Call graph output is overwhelming?</strong></p>
<p>A: Use filtering options:</p>
<pre><code class="language-bash"># Show only statistics, not the full graph
debtmap --call-graph-stats-only

# Limit callers and callees shown
debtmap --max-callers 5 --max-callees 5

# Hide dependencies from main output
debtmap --no-dependencies

# Export to JSON for external processing
debtmap --debug-call-graph --debug-format json --output call-graph.json
</code></pre>
<p><strong>When to use call graph debugging</strong>:</p>
<ul>
<li>Investigating missing critical path detection</li>
<li>Understanding dependency relationships</li>
<li>Debugging context provider issues</li>
<li>Analyzing architectural coupling</li>
<li>Validating function relationship detection</li>
</ul>
<h3 id="tiered-prioritization-issues"><a class="header" href="#tiered-prioritization-issues">Tiered Prioritization Issues</a></h3>
<p><strong>Overview</strong>: Debtmap uses a 4-tier system to classify and <strong>sort</strong> technical debt items by architectural importance. Tiers affect result ordering but do not multiply scores.</p>
<p><strong>Tier Classification</strong>:</p>
<ul>
<li><strong>Tier 1 (Critical Architecture)</strong>: High complexity, low coverage, high dependencies, entry points, or file-level architectural debt</li>
<li><strong>Tier 2 (Complex Untested)</strong>: Significant complexity or coverage gaps</li>
<li><strong>Tier 3 (Testing Gaps)</strong>: Moderate issues that need attention</li>
<li><strong>Tier 4 (Maintenance)</strong>: Low-priority items, routine maintenance</li>
</ul>
<p><strong>Result Ordering</strong>:
Results are sorted first by tier (T1 &gt; T2 &gt; T3 &gt; T4), then by score within each tier. This ensures architecturally critical items appear at the top regardless of their absolute score.</p>
<p><strong>Note</strong>: Tier weights (1.5×, 1.0×, 0.7×, 0.3×) exist in the configuration but are currently not applied as score multipliers. Tiers control sort order instead.</p>
<p><strong>Configuration</strong>:</p>
<pre><code class="language-toml"># In .debtmap.toml
[tiers]
# Tier 2 requires EITHER high complexity OR high dependencies
t2_complexity_threshold = 15
t2_dependency_threshold = 10

# Tier 3 requires moderate complexity
t3_complexity_threshold = 8

# Control Tier 4 visibility in main report
show_t4_in_main_report = false
</code></pre>
<p><strong>Common Issues</strong>:</p>
<p><strong>Q: Why is my item in Tier 3 instead of Tier 2?</strong></p>
<p>A: Check if it meets Tier 2 thresholds:</p>
<pre><code class="language-bash"># See tier classification with verbosity
debtmap -v

# Check current thresholds
cat .debtmap.toml | grep -A 5 "\[tiers\]"

# Lower thresholds to promote more items to Tier 2
# In .debtmap.toml:
# t2_complexity_threshold = 10  (default: 15)
# t2_dependency_threshold = 5   (default: 10)
</code></pre>
<p><strong>Q: How do I hide Tier 4 items from the main report?</strong></p>
<p>A: Use the <code>show_t4_in_main_report</code> configuration:</p>
<pre><code class="language-toml"># In .debtmap.toml
[tiers]
show_t4_in_main_report = false
</code></pre>
<p>Tier 4 items will still appear in detailed output but won’t clutter the main summary.</p>
<h3 id="file-level-scoring-issues"><a class="header" href="#file-level-scoring-issues">File-Level Scoring Issues</a></h3>
<p><strong>Overview</strong>: Debtmap aggregates function/class scores into file-level scores using configurable aggregation methods.</p>
<p><strong>Note</strong>: The exact aggregation formula depends on the selected method (see <code>--aggregation-method</code> flag). File-level scores combine individual item scores with file-level characteristics.</p>
<p><strong>Aggregation Methods</strong>:</p>
<pre><code class="language-bash"># Weighted sum (default) - considers complexity weights
debtmap --aggregation-method weighted_sum

# Simple sum - adds all function scores
debtmap --aggregation-method sum

# Logarithmic sum - dampens very high scores
debtmap --aggregation-method logarithmic_sum

# Max plus average - highlights worst function + context
debtmap --aggregation-method max_plus_average
</code></pre>
<p><strong>When to use each method</strong>:</p>
<ul>
<li><strong>weighted_sum</strong>: Default, balances individual and collective impact</li>
<li><strong>sum</strong>: When you want raw cumulative debt</li>
<li><strong>logarithmic_sum</strong>: For very large files to prevent score explosion</li>
<li><strong>max_plus_average</strong>: Focus on worst offender while considering overall file health</li>
</ul>
<p><strong>Aggregation Control Flags</strong>:</p>
<pre><code class="language-bash"># Show only aggregated file-level scores
debtmap --aggregate-only

# Disable file-level aggregation entirely
debtmap --no-aggregation

# Default: show both individual items and file aggregates
debtmap
</code></pre>
<p><strong>Troubleshooting High File Scores</strong>:</p>
<p><strong>Q: Why does this file have such a high score?</strong></p>
<p>A: Check contributing factors with verbosity:</p>
<pre><code class="language-bash"># See file-level score breakdown
debtmap path/to/file.rs -vv

# Look for:
# - High function count (density_factor kicks in at 50+)
# - God object detection (1.5× multiplier)
# - Low coverage (high coverage_factor)
# - Large file size (size_factor)
# - Multiple high-complexity functions

# Disable god object detection if false positive
debtmap --no-god-object path/to/file.rs
</code></pre>
<h3 id="functional-analysis-issues"><a class="header" href="#functional-analysis-issues">Functional Analysis Issues</a></h3>
<p><strong>Overview</strong>: Functional analysis detects violations of functional programming principles like impure functions, excessive mutation, and side effects.</p>
<p><strong>Enable Functional Analysis</strong>:</p>
<pre><code class="language-bash"># Enable AST-based functional analysis
debtmap --ast-functional-analysis

# Use different strictness profiles
debtmap --ast-functional-analysis --functional-analysis-profile strict
debtmap --ast-functional-analysis --functional-analysis-profile balanced  # (default)
debtmap --ast-functional-analysis --functional-analysis-profile lenient
</code></pre>
<p><strong>Analysis Profiles</strong>:</p>
<ul>
<li><strong>strict</strong>: Flag most functional violations, enforce pure functions</li>
<li><strong>balanced</strong>: Default, reasonable middle ground for mixed codebases</li>
<li><strong>lenient</strong>: Allow more pragmatic deviations from pure functional style</li>
</ul>
<p><strong>Common Issues</strong>:</p>
<p><strong>Q: Too many false positives for legitimate imperative code?</strong></p>
<p>A: Adjust the profile or disable for specific areas:</p>
<pre><code class="language-bash"># Use lenient profile for pragmatic codebases
debtmap --ast-functional-analysis --functional-analysis-profile lenient

# Disable functional analysis if not using FP style
debtmap  # (functional analysis is opt-in via --ast-functional-analysis)
</code></pre>
<p><strong>Q: What violations does functional analysis detect?</strong></p>
<p>A: Functional analysis flags:</p>
<ul>
<li>Mutation of variables (reassignment)</li>
<li>Side effects in functions (I/O, global state)</li>
<li>Impure functions (non-deterministic behavior)</li>
<li>Excessive mutable state</li>
<li>Missing const/immutability annotations</li>
</ul>
<pre><code class="language-bash"># See detailed functional analysis results
debtmap --ast-functional-analysis -vv

# Focus on functional purity issues
debtmap --ast-functional-analysis --filter "functional"
</code></pre>
<p><strong>When to use functional analysis</strong>:</p>
<ul>
<li>Projects following functional programming principles</li>
<li>Codebases using immutable data structures</li>
<li>When refactoring to reduce side effects</li>
<li>For detecting hidden mutation bugs</li>
<li>In functional-first languages (Rust with functional style)</li>
</ul>
<p><strong>When to disable</strong>:</p>
<ul>
<li>Imperative codebases where mutation is expected</li>
<li>Performance-critical code requiring in-place updates</li>
<li>When false positives overwhelm actual issues</li>
</ul>
<h3 id="pattern-detection-issues"><a class="header" href="#pattern-detection-issues">Pattern Detection Issues</a></h3>
<p><strong>Overview</strong>: Pattern detection identifies repetitive code structures, anti-patterns, and common debt patterns.</p>
<p><strong>Control Pattern Detection</strong>:</p>
<pre><code class="language-bash"># Disable pattern detection entirely
debtmap --no-pattern-detection

# Specify specific patterns to detect
debtmap --patterns "god_object,long_function,complex_conditional"

# Adjust pattern detection sensitivity
debtmap --pattern-threshold 0.8  # Higher = stricter matching (0.0-1.0)

# Show pattern detection warnings
debtmap --show-pattern-warnings
</code></pre>
<p><strong>Common Issues</strong>:</p>
<p><strong>Q: Pattern detection causes too many false positives?</strong></p>
<p>A: Adjust threshold or disable specific patterns:</p>
<pre><code class="language-bash"># Increase threshold for stricter matching (fewer false positives)
debtmap --pattern-threshold 0.9

# Disable pattern detection for exploratory analysis
debtmap --no-pattern-detection

# See which patterns are triggering with warnings
debtmap --show-pattern-warnings -v
</code></pre>
<p><strong>Q: Missing patterns I expect to see?</strong></p>
<p>A: Lower threshold or check pattern names:</p>
<pre><code class="language-bash"># Lower threshold to catch more patterns
debtmap --pattern-threshold 0.6

# Specify patterns explicitly
debtmap --patterns "god_object,long_function,deep_nesting"

# Use verbosity to see pattern detection process
debtmap --show-pattern-warnings -vv
</code></pre>
<p><strong>Detected Patterns</strong>:</p>
<ul>
<li><code>god_object</code>: Classes/modules with too many responsibilities</li>
<li><code>long_function</code>: Functions exceeding length thresholds</li>
<li><code>complex_conditional</code>: Nested or complex branching logic</li>
<li><code>deep_nesting</code>: Excessive indentation depth</li>
<li><code>parameter_overload</code>: Too many function parameters</li>
<li><code>duplicate_code</code>: Repetitive code structures</li>
</ul>
<p><strong>When to adjust pattern threshold</strong>:</p>
<ul>
<li><strong>Higher (0.8-1.0)</strong>: Reduce noise, only flag clear violations</li>
<li><strong>Lower (0.5-0.7)</strong>: Catch subtle patterns, more comprehensive detection</li>
<li><strong>Default (0.7)</strong>: Balanced detection for most codebases</li>
</ul>
<h3 id="public-api-detection-issues"><a class="header" href="#public-api-detection-issues">Public API Detection Issues</a></h3>
<p><strong>Overview</strong>: Public API detection identifies functions and types that form your crate’s public interface, affecting scoring and priority.</p>
<p><strong>Control Public API Detection</strong>:</p>
<pre><code class="language-bash"># Disable public API detection
debtmap --no-public-api-detection

# Adjust public API detection threshold
debtmap --public-api-threshold 0.5  # Lower = more items marked as public (0.0-1.0)
</code></pre>
<p><strong>Common Issues</strong>:</p>
<p><strong>Q: Private functions being marked as public API?</strong></p>
<p>A: Increase the threshold for stricter detection:</p>
<pre><code class="language-bash"># Higher threshold = only clearly public items
debtmap --public-api-threshold 0.8

# Disable public API detection if not useful
debtmap --no-public-api-detection

# See what's being detected as public
debtmap -vv 2&gt;&amp;1 | grep "public API"
</code></pre>
<p><strong>Q: Public functions not being detected?</strong></p>
<p>A: Lower the threshold or check visibility:</p>
<pre><code class="language-bash"># Lower threshold to detect more public items
debtmap --public-api-threshold 0.3

# Verify function is actually public (pub keyword in Rust)
debtmap path/to/file.rs -vv
</code></pre>
<p><strong>How Public API Detection Works</strong>:</p>
<ul>
<li>Checks for <code>pub</code> visibility in Rust</li>
<li>Identifies exported functions in Python (<code>__all__</code>)</li>
<li>Detects exported symbols in JavaScript/TypeScript</li>
<li>Considers call graph entry points</li>
<li>Factors in documentation presence</li>
</ul>
<p><strong>Impact on Scoring</strong>:</p>
<ul>
<li>Public API items get higher priority scores (1.1× multiplier)</li>
<li>Entry point detection uses public API information</li>
<li>Critical path analysis considers public boundaries</li>
</ul>
<p><strong>When to disable</strong>:</p>
<ul>
<li>Internal tools or scripts (no public API)</li>
<li>When API detection causes confusion</li>
<li>Libraries where everything is intentionally public</li>
</ul>
<h3 id="combining-advanced-flags"><a class="header" href="#combining-advanced-flags">Combining Advanced Flags</a></h3>
<pre><code class="language-bash"># Comprehensive analysis with all features (multi-pass is default)
debtmap --attribution --context -vv

# Minimal filtering for exploration
debtmap --min-problematic 1 --min-priority 0 --no-god-object

# Performance-focused analysis (disable multi-pass)
debtmap --no-multi-pass --jobs 8

# Summary view with aggregated scores
debtmap --detail-level summary --aggregate-only
</code></pre>
<h2 id="error-messages-reference"><a class="header" href="#error-messages-reference">Error Messages Reference</a></h2>
<p>Understanding common error messages and how to resolve them.</p>
<h3 id="file-system-errors"><a class="header" href="#file-system-errors">File System Errors</a></h3>
<p><strong>Message</strong>: <code>File system error: Permission denied</code></p>
<p><strong>Meaning</strong>: Cannot read file or directory due to permissions</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Check file permissions: <code>ls -la &lt;file&gt;</code></li>
<li>Ensure user has read access</li>
</ul>
<hr>
<p><strong>Message</strong>: <code>File system error: No such file or directory</code></p>
<p><strong>Meaning</strong>: File or directory does not exist</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Verify path is correct</li>
<li>Check current working directory: <code>pwd</code></li>
<li>Use absolute paths if needed</li>
<li>Ensure files weren’t moved or deleted</li>
</ul>
<h3 id="parse-errors-1"><a class="header" href="#parse-errors-1">Parse Errors</a></h3>
<p><strong>Message</strong>: <code>Parse error in file.rs:line:column: unexpected token</code></p>
<p><strong>Meaning</strong>: Syntax debtmap cannot parse</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Try fallback mode
debtmap --semantic-off

# For Rust macros
debtmap --verbose-macro-warnings --show-macro-stats

# Exclude problematic file
# In .debtmap/config.toml:
# exclude = ["path/to/file.rs"]
</code></pre>
<h3 id="analysis-errors"><a class="header" href="#analysis-errors">Analysis Errors</a></h3>
<p><strong>Message</strong>: <code>Analysis error: internal analysis failure</code></p>
<p><strong>Meaning</strong>: Internal error during analysis phase</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Try fallback mode
debtmap --semantic-off

# Report with debug info
debtmap -vvv 2&gt;&amp;1 | tee error.log

# Isolate problem file
debtmap --max-files 1 path/to/suspected/file
</code></pre>
<h3 id="configuration-errors"><a class="header" href="#configuration-errors">Configuration Errors</a></h3>
<p><strong>Message</strong>: <code>Configuration error: invalid config value</code></p>
<p><strong>Meaning</strong>: Invalid configuration in <code>.debtmap/config.toml</code> or CLI</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Check <code>.debtmap/config.toml</code> syntax</li>
<li>Validate TOML format: <code>cat .debtmap/config.toml</code></li>
<li>Review CLI flag values</li>
<li>Check for typos in flag names</li>
</ul>
<h3 id="validation-errors"><a class="header" href="#validation-errors">Validation Errors</a></h3>
<p><strong>Message</strong>: <code>Validation error: threshold validation failed</code></p>
<p><strong>Meaning</strong>: Threshold configuration is invalid</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Check threshold values in config</li>
<li>Ensure <code>--min-priority</code> is in valid range (0-10)</li>
<li>Verify threshold preset exists</li>
<li>Use <code>--threshold-preset</code> with valid preset name</li>
</ul>
<h3 id="dependency-errors"><a class="header" href="#dependency-errors">Dependency Errors</a></h3>
<p><strong>Message</strong>: <code>Dependency error: cannot resolve dependency graph</code></p>
<p><strong>Meaning</strong>: Cannot build dependency relationships</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Disable dependency provider
debtmap --context --disable-context dependency

# Try without context
debtmap

# Debug with verbosity
debtmap -vvv
</code></pre>
<h3 id="concurrency-errors"><a class="header" href="#concurrency-errors">Concurrency Errors</a></h3>
<p><strong>Message</strong>: <code>Concurrency error: parallel processing failure</code></p>
<p><strong>Meaning</strong>: Error during parallel execution</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Disable parallel processing
debtmap --no-parallel

# Reduce thread count
debtmap --jobs 1

# Report issue with debug output
debtmap -vvv 2&gt;&amp;1 | tee error.log
</code></pre>
<h3 id="unsupported-errors"><a class="header" href="#unsupported-errors">Unsupported Errors</a></h3>
<p><strong>Message</strong>: <code>Unsupported: feature not available for &lt;language&gt;</code></p>
<p><strong>Meaning</strong>: Language or construct not supported</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Use supported languages: Rust, Python, JavaScript, TypeScript</li>
<li>Check if language is enabled in config</li>
<li>Some advanced features may not be available for all languages</li>
<li>Try <code>--semantic-off</code> for basic analysis</li>
</ul>
<h3 id="pattern-errors"><a class="header" href="#pattern-errors">Pattern Errors</a></h3>
<p><strong>Message</strong>: <code>Pattern error: invalid glob pattern</code></p>
<p><strong>Meaning</strong>: Invalid glob pattern in configuration or CLI</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Check glob pattern syntax</li>
<li>Escape special characters if needed</li>
<li>Test pattern with shell glob: <code>ls &lt;pattern&gt;</code></li>
<li>Use simpler patterns or path prefixes</li>
</ul>
<h2 id="language-specific-issues"><a class="header" href="#language-specific-issues">Language-Specific Issues</a></h2>
<h3 id="rust"><a class="header" href="#rust">Rust</a></h3>
<p><strong>Macro Expansion Issues</strong></p>
<pre><code class="language-bash"># See macro warnings
debtmap --verbose-macro-warnings

# Show macro statistics
debtmap --show-macro-stats

# Common issue: Complex macros may not expand correctly
# Solution: Use --semantic-off for faster fallback
</code></pre>
<p><strong>Trait and Generic Complexity</strong></p>
<p>Complex trait bounds and generic constraints may affect analysis accuracy:</p>
<pre><code class="language-bash"># Full semantic analysis (default)
debtmap

# Fallback mode for edge cases
debtmap --semantic-off
</code></pre>
<h3 id="python"><a class="header" href="#python">Python</a></h3>
<p><strong>Type Inference Limitations</strong></p>
<p>Dynamic typing makes some analysis challenging:</p>
<pre><code class="language-bash"># Best effort type inference (default)
debtmap

# Fallback mode if issues
debtmap --semantic-off
</code></pre>
<p><strong>Import Resolution</strong></p>
<p>Complex import structures may not resolve fully:</p>
<ul>
<li>Relative imports usually work</li>
<li>Dynamic imports may not be detected</li>
<li><code>__init__.py</code> packages are supported</li>
</ul>
<h3 id="javascripttypescript"><a class="header" href="#javascripttypescript">JavaScript/TypeScript</a></h3>
<p><strong>JSX/TSX Parsing</strong></p>
<p>Ensure files have correct extensions:</p>
<ul>
<li><code>.jsx</code> for JavaScript + JSX</li>
<li><code>.tsx</code> for TypeScript + JSX</li>
<li>Configure extensions in <code>.debtmap/config.toml</code> if needed</li>
</ul>
<p><strong>Type Resolution</strong></p>
<p>TypeScript type resolution in complex projects:</p>
<pre><code class="language-bash"># Full type checking (default for .ts files)
debtmap

# Fallback if type issues
debtmap --semantic-off
</code></pre>
<h3 id="mixed-language-projects"><a class="header" href="#mixed-language-projects">Mixed Language Projects</a></h3>
<pre><code class="language-bash"># Analyze all supported languages (default)
debtmap

# Filter specific languages
# In .debtmap/config.toml:
# languages = ["rust", "python"]
</code></pre>
<h3 id="unsupported-language-constructs"><a class="header" href="#unsupported-language-constructs">Unsupported Language Constructs</a></h3>
<p>Some advanced language features may show as “Unsupported”:</p>
<ul>
<li>Rust: Some macro patterns, const generics edge cases</li>
<li>Python: Some metaclass patterns, dynamic code generation</li>
<li>JavaScript: Some advanced AST manipulation</li>
</ul>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Use <code>--semantic-off</code> for basic analysis</li>
<li>Exclude problematic files if needed</li>
<li>Report unsupported patterns as feature requests</li>
</ul>
<h3 id="boilerplate-detection-issues"><a class="header" href="#boilerplate-detection-issues">Boilerplate Detection Issues</a></h3>
<p><strong>Overview</strong>: Boilerplate detection identifies repetitive code patterns that are necessary but contribute to complexity scores, such as trait implementations, error handling, and validation logic.</p>
<p><strong>How Boilerplate Detection Works</strong>:</p>
<p>Debtmap automatically detects common boilerplate patterns:</p>
<ul>
<li><strong>Trait implementations</strong>: Standard trait method implementations (Debug, Display, From, etc.)</li>
<li><strong>Error handling</strong>: Repetitive error conversion and propagation code</li>
<li><strong>Validation functions</strong>: Similar validation logic across multiple functions</li>
<li><strong>Macro-generated code</strong>: Repetitive patterns from macro expansions</li>
<li><strong>Builder patterns</strong>: Setter methods and builder implementations</li>
</ul>
<p><strong>Impact on Scoring</strong>:</p>
<p>Detected boilerplate receives dampened complexity scores to avoid inflating technical debt for necessary repetitive code.</p>
<p><strong>Common Issues</strong>:</p>
<p><strong>Q: Legitimate complex code being marked as boilerplate?</strong></p>
<p>A: Boilerplate detection uses pattern similarity thresholds. If unique logic is being incorrectly dampened:</p>
<pre><code class="language-bash"># See what's being detected as boilerplate
debtmap -vv 2&gt;&amp;1 | grep "boilerplate"

# Check entropy analysis settings (used for boilerplate detection)
# In .debtmap.toml:
# [entropy]
# pattern_threshold = 0.8  # Increase for stricter matching
</code></pre>
<p><strong>Q: Boilerplate code still showing high scores?</strong></p>
<p>A: Some boilerplate patterns may not be recognized. Common cases:</p>
<pre><code class="language-bash"># Trait implementations should be automatically detected
# If not dampened, check that code follows standard patterns

# For custom validation patterns, ensure similarity is high enough
# In .debtmap.toml:
# [entropy]
# pattern_threshold = 0.7  # Lower to catch more patterns
# enabled = true
</code></pre>
<p><strong>Q: How to identify what debtmap considers boilerplate?</strong></p>
<p>A: Use verbose output:</p>
<pre><code class="language-bash"># See boilerplate detection in action
debtmap -vv 2&gt;&amp;1 | grep -i "boilerplate\|pattern\|entropy"

# Check specific file
debtmap path/to/file.rs -vv
</code></pre>
<p><strong>Boilerplate Reduction Strategies</strong>:</p>
<pre><code class="language-toml"># In .debtmap.toml
[entropy]
enabled = true                    # Enable pattern-based dampening
pattern_threshold = 0.7           # Similarity threshold (0.0-1.0)
weight = 0.3                      # Impact on complexity adjustment
min_tokens = 50                   # Minimum size for pattern analysis
</code></pre>
<p><strong>When boilerplate detection helps</strong>:</p>
<ul>
<li>Codebases with many trait implementations</li>
<li>Projects with extensive validation logic</li>
<li>Macro-heavy code (derives, procedural macros)</li>
<li>Builder pattern implementations</li>
<li>Error handling boilerplate</li>
</ul>
<p><strong>When to adjust thresholds</strong>:</p>
<ul>
<li><strong>Increase <code>pattern_threshold</code></strong> (0.8-0.9): If unique code is being dampened</li>
<li><strong>Decrease <code>pattern_threshold</code></strong> (0.5-0.6): If obvious boilerplate isn’t being detected</li>
<li><strong>Disable entropy</strong> (<code>enabled = false</code>): If causing too many false dampening</li>
</ul>
<h3 id="false-positives"><a class="header" href="#false-positives">False Positives</a></h3>
<p>Reduce false positives for validation functions and repetitive code patterns using entropy analysis:</p>
<p><strong>Enable and Configure Entropy Analysis</strong>:</p>
<pre><code class="language-toml"># In .debtmap.toml
[entropy]
enabled = true                    # Enable entropy-based dampening
weight = 0.3                      # Weight in complexity adjustment (0.0-1.0)
min_tokens = 50                   # Minimum tokens for entropy calculation
pattern_threshold = 0.7           # Pattern similarity threshold (0.0-1.0)
use_classification = true         # Enable advanced token classification
entropy_threshold = 0.5           # Entropy level for dampening (0.0-1.0)
branch_threshold = 0.8            # Branch similarity threshold (0.0-1.0)
max_combined_reduction = 0.5      # Max reduction percentage (0.0-1.0)
</code></pre>
<p><strong>When to Adjust Parameters</strong>:</p>
<ul>
<li><strong>Increase <code>pattern_threshold</code></strong> (e.g., 0.8-0.9): Be more strict, reduce dampening for truly unique code</li>
<li><strong>Decrease <code>entropy_threshold</code></strong> (e.g., 0.3-0.4): Apply dampening more broadly to catch more repetitive patterns</li>
<li><strong>Increase <code>weight</code></strong> (e.g., 0.4-0.5): Make entropy have stronger impact on final scores</li>
<li><strong>Increase <code>min_tokens</code></strong> (e.g., 100): Only apply entropy analysis to larger functions</li>
<li><strong>Increase <code>branch_threshold</code></strong> (e.g., 0.9): Be more strict about branching pattern similarity</li>
</ul>
<p>Entropy analysis can reduce false positives by up to 70% for validation functions, error handling, and other repetitive patterns.</p>
<p><strong>Other False Positive Reduction Strategies</strong>:</p>
<pre><code class="language-bash"># Use context-aware analysis
debtmap --context

# Adjust thresholds
debtmap --threshold-preset lenient

# Disable context-aware filtering if too aggressive
debtmap --no-context-aware
</code></pre>
<h3 id="missing-detections"><a class="header" href="#missing-detections">Missing Detections</a></h3>
<pre><code class="language-bash"># Ensure semantic analysis is enabled
debtmap  # (default, semantic ON)

# Increase verbosity to see what's detected
debtmap -vv

# Check if files are being analyzed
debtmap -v 2&gt;&amp;1 | grep "Processing"
</code></pre>
<h2 id="output-formatting-issues"><a class="header" href="#output-formatting-issues">Output Formatting Issues</a></h2>
<h3 id="choose-output-format"><a class="header" href="#choose-output-format">Choose Output Format</a></h3>
<pre><code class="language-bash"># Terminal format (default, human-readable)
debtmap

# JSON format
debtmap --format json

# Markdown format
debtmap --format markdown
</code></pre>
<h3 id="json-format-options"><a class="header" href="#json-format-options">JSON Format Options</a></h3>
<pre><code class="language-bash"># Legacy format (default): {File: {...}}
debtmap --format json --output-format legacy

# Unified format: consistent structure with 'type' field
debtmap --format json --output-format unified

# Validate JSON
debtmap --format json | jq .

# Write to file
debtmap --format json --output results.json
</code></pre>
<h3 id="plain-output-mode"><a class="header" href="#plain-output-mode">Plain Output Mode</a></h3>
<p>For environments without color/emoji support:</p>
<pre><code class="language-bash"># ASCII-only, no colors, no emoji
debtmap --plain

# Or set environment variable
export NO_EMOJI=1
debtmap
</code></pre>
<h3 id="terminal-color-issues"><a class="header" href="#terminal-color-issues">Terminal Color Issues</a></h3>
<p><strong>Problem</strong>: Colors not rendering or showing escape codes</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Use plain mode
debtmap --plain

# Check TERM environment variable
echo $TERM

# Set appropriate TERM
export TERM=xterm-256color
</code></pre>
<h3 id="emoji-issues"><a class="header" href="#emoji-issues">Emoji Issues</a></h3>
<p><strong>Problem</strong>: Emojis showing as boxes or ??</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Disable emojis
debtmap --plain

# Or environment variable
export NO_EMOJI=1
debtmap
</code></pre>
<h3 id="markdown-rendering"><a class="header" href="#markdown-rendering">Markdown Rendering</a></h3>
<p>Ensure viewer supports GitHub-flavored markdown:</p>
<ul>
<li>Tables</li>
<li>Code blocks with syntax highlighting</li>
<li>Task lists</li>
</ul>
<h3 id="write-output-to-file"><a class="header" href="#write-output-to-file">Write Output to File</a></h3>
<pre><code class="language-bash"># JSON to file
debtmap --format json --output results.json

# Markdown to file
debtmap --format markdown --output report.md

# Terminal format to file (preserves colors)
debtmap --output results.txt

# Plain format to file
debtmap --plain --output results.txt
</code></pre>
<h3 id="summary-vs-full-output"><a class="header" href="#summary-vs-full-output">Summary vs Full Output</a></h3>
<pre><code class="language-bash"># Summary mode (compact)
debtmap --summary
debtmap -s

# Full output (default)
debtmap

# Limit number of items
debtmap --top 10       # Top 10 by priority
debtmap --tail 10      # Bottom 10 by priority
</code></pre>
<h3 id="filtering-output"><a class="header" href="#filtering-output">Filtering Output</a></h3>
<pre><code class="language-bash"># Minimum priority level
debtmap --min-priority 5

# Category filters
debtmap --filter "complexity,debt"

# Combine filters
debtmap --min-priority 3 --top 20 --filter complexity
</code></pre>
<h2 id="compare-command-issues"><a class="header" href="#compare-command-issues">Compare Command Issues</a></h2>
<p>The <code>compare</code> command helps track changes in technical debt over time.</p>
<h3 id="basic-usage"><a class="header" href="#basic-usage">Basic Usage</a></h3>
<p><strong>Note</strong>: The <code>compare</code> command defaults to JSON output format (unlike <code>analyze</code> which defaults to terminal). Use <code>--format terminal</code> or <code>--format markdown</code> if you need different output.</p>
<pre><code class="language-bash"># Save baseline results
debtmap --format json --output before.json

# Make code changes...

# Save new results
debtmap --format json --output after.json

# Compare results (outputs JSON by default)
debtmap compare --before before.json --after after.json

# Compare with terminal output
debtmap compare --before before.json --after after.json --format terminal
</code></pre>
<h3 id="targeted-comparison"><a class="header" href="#targeted-comparison">Targeted Comparison</a></h3>
<p>Use <code>--plan</code> and <code>--target-location</code> for focused debt analysis:</p>
<pre><code class="language-bash"># Compare based on implementation plan
debtmap compare --before before.json --after after.json --plan implementation-plan.json

# Compare specific code location
debtmap compare --before before.json --after after.json \
  --target-location src/main.rs:calculate_score:42

# Combine both for precise tracking
debtmap compare --before before.json --after after.json \
  --plan implementation-plan.json \
  --target-location src/analyzers/complexity.rs:analyze_function:128
</code></pre>
<p><strong>Use cases</strong>:</p>
<ul>
<li><code>--plan</code>: Track debt changes for planned refactoring tasks</li>
<li><code>--target-location</code>: Focus on specific function or code location</li>
<li>Combine for granular technical debt tracking</li>
</ul>
<h3 id="incompatible-format-errors"><a class="header" href="#incompatible-format-errors">Incompatible Format Errors</a></h3>
<p><strong>Problem</strong>: “Incompatible formats” error when comparing files</p>
<p><strong>Causes</strong>:</p>
<ul>
<li>Mixing legacy and unified JSON formats</li>
<li>Files from different debtmap versions</li>
<li>Corrupted JSON files</li>
</ul>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Ensure both files use same output format
debtmap --format json --output-format unified --output before.json
# ... make changes ...
debtmap --format json --output-format unified --output after.json
debtmap compare --before before.json --after after.json

# Validate JSON files are well-formed
jq . before.json &gt; /dev/null
jq . after.json &gt; /dev/null
</code></pre>
<h3 id="comparing-across-branches"><a class="header" href="#comparing-across-branches">Comparing Across Branches</a></h3>
<pre><code class="language-bash"># Save baseline on main branch
git checkout main
debtmap --format json --output main.json

# Switch to feature branch
git checkout feature-branch
debtmap --format json --output feature.json

# Compare branches
debtmap compare --before main.json --after feature.json
</code></pre>
<h3 id="missing-files-error"><a class="header" href="#missing-files-error">Missing Files Error</a></h3>
<p><strong>Problem</strong>: “File not found” when running compare</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Verify file paths are correct (use absolute paths if needed)</li>
<li>Ensure JSON files weren’t moved or deleted</li>
<li>Check current working directory with <code>pwd</code></li>
</ul>
<h3 id="format-mismatch-issues"><a class="header" href="#format-mismatch-issues">Format Mismatch Issues</a></h3>
<p><strong>Problem</strong>: Compare shows unexpected differences or errors</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># Regenerate both files with same debtmap version
debtmap --format json --output before.json
# ... make changes ...
debtmap --format json --output after.json

# Use same output format for both
debtmap --format json --output-format unified --output before.json
debtmap --format json --output-format unified --output after.json
</code></pre>
<h2 id="validate-command-issues"><a class="header" href="#validate-command-issues">Validate Command Issues</a></h2>
<p>The <code>validate</code> command checks if a codebase meets specified quality thresholds, useful for CI/CD pipelines.</p>
<h3 id="basic-validation"><a class="header" href="#basic-validation">Basic Validation</a></h3>
<pre><code class="language-bash"># Validate codebase passes default thresholds
debtmap validate /path/to/project

# Exit code 0 if passes, non-zero if validation fails
</code></pre>
<h3 id="debt-density-validation"><a class="header" href="#debt-density-validation">Debt Density Validation</a></h3>
<p><strong>Flag</strong>: <code>--max-debt-density &lt;number&gt;</code></p>
<p>Sets the maximum acceptable technical debt per 1000 lines of code.</p>
<pre><code class="language-bash"># Set maximum acceptable debt density (per 1000 LOC)
debtmap validate /path/to/project --max-debt-density 10.0

# Stricter threshold for critical projects
debtmap validate /path/to/project --max-debt-density 5.0

# Lenient threshold for legacy code
debtmap validate /path/to/project --max-debt-density 20.0
</code></pre>
<p><strong>Troubleshooting validation failures</strong>:</p>
<pre><code class="language-bash"># See which files exceed threshold with details
debtmap validate /path/to/project --max-debt-density 10.0 -v

# Get detailed breakdown of debt density calculations
debtmap validate /path/to/project --max-debt-density 10.0 -vv

# Analyze specific files that failed validation
debtmap /path/to/problematic/file.rs -v

# Understand debt density metric
# Debt density = (total_debt_score / total_lines_of_code) × 1000
# Example: 150 debt points across 10,000 LOC = 15.0 debt density
</code></pre>
<p><strong>Interpreting debt density values</strong>:</p>
<ul>
<li><strong>&lt; 5.0</strong>: Excellent code quality</li>
<li><strong>5.0 - 10.0</strong>: Good, manageable technical debt</li>
<li><strong>10.0 - 20.0</strong>: Moderate debt, consider cleanup</li>
<li><strong>&gt; 20.0</strong>: High debt, refactoring recommended</li>
</ul>
<h3 id="cicd-integration"><a class="header" href="#cicd-integration">CI/CD Integration</a></h3>
<pre><code class="language-bash"># In CI pipeline (fails build if validation fails)
debtmap validate . --max-debt-density 10.0 || exit 1

# With verbose output for debugging
debtmap validate . --max-debt-density 10.0 -v

# Save validation report
debtmap validate . --max-debt-density 10.0 --format json --output validation.json
</code></pre>
<p><strong>Use cases</strong>:</p>
<ul>
<li>Enforce quality gates in CI/CD pipelines</li>
<li>Prevent accumulation of technical debt over time</li>
<li>Track debt density trends across releases</li>
<li>Set different thresholds for different parts of codebase</li>
</ul>
<h2 id="validate-improvement-command-issues"><a class="header" href="#validate-improvement-command-issues">Validate-Improvement Command Issues</a></h2>
<p>The <code>validate-improvement</code> command verifies that code changes actually reduced technical debt, useful for validating refactoring efforts.</p>
<h3 id="basic-usage-1"><a class="header" href="#basic-usage-1">Basic Usage</a></h3>
<pre><code class="language-bash"># Validate that changes improved the codebase
debtmap validate-improvement \
  --comparison comparison.json \
  --output improvement-report.json

# Set minimum acceptable improvement threshold
debtmap validate-improvement \
  --comparison comparison.json \
  --threshold 5.0 \
  --output improvement-report.json
</code></pre>
<h3 id="command-flags"><a class="header" href="#command-flags">Command Flags</a></h3>
<pre><code class="language-bash"># Specify comparison file from 'debtmap compare' output
debtmap validate-improvement --comparison comparison.json

# Set output file for validation results
debtmap validate-improvement \
  --comparison comparison.json \
  --output improvement-report.json

# Use previous validation for trend analysis
debtmap validate-improvement \
  --comparison comparison.json \
  --previous-validation previous-report.json

# Set minimum improvement threshold (percentage)
debtmap validate-improvement \
  --comparison comparison.json \
  --threshold 10.0  # Require 10% improvement

# Control output format (json, text, markdown)
debtmap validate-improvement \
  --comparison comparison.json \
  --format json

# Quiet mode (exit code only, no output)
debtmap validate-improvement \
  --comparison comparison.json \
  --quiet
</code></pre>
<h3 id="typical-workflow"><a class="header" href="#typical-workflow">Typical Workflow</a></h3>
<pre><code class="language-bash"># Step 1: Save baseline before refactoring
debtmap --format json --output before.json

# Step 2: Make code changes...

# Step 3: Analyze after changes
debtmap --format json --output after.json

# Step 4: Compare results
debtmap compare --before before.json --after after.json \
  --format json --output comparison.json

# Step 5: Validate improvement
debtmap validate-improvement \
  --comparison comparison.json \
  --threshold 5.0 \
  --output validation.json

# Exit code 0 if improvement meets threshold, non-zero otherwise
</code></pre>
<h3 id="common-issues-1"><a class="header" href="#common-issues-1">Common Issues</a></h3>
<p><strong>Q: Validation fails but I fixed issues - why?</strong></p>
<p>A: Check what the validation is measuring:</p>
<pre><code class="language-bash"># See detailed validation results (without --quiet)
debtmap validate-improvement \
  --comparison comparison.json \
  --format text

# Common reasons for failure:
# - Added new complexity elsewhere while fixing issues
# - Threshold too strict for the changes made
# - Comparison file doesn't reflect latest changes
# - File-level scores increased despite function improvements
</code></pre>
<p><strong>Q: How is improvement calculated?</strong></p>
<p>A: Improvement is measured as percentage reduction in total debt score:</p>
<pre><code class="language-bash"># Formula: improvement = ((before_score - after_score) / before_score) × 100
#
# Example:
# - Before: total score = 100
# - After: total score = 80
# - Improvement: ((100 - 80) / 100) × 100 = 20%

# See detailed breakdown
debtmap validate-improvement \
  --comparison comparison.json \
  --format text -v
</code></pre>
<p><strong>Q: Can I track improvement over multiple refactorings?</strong></p>
<p>A: Yes, use <code>--previous-validation</code> for trend analysis:</p>
<pre><code class="language-bash"># First validation
debtmap validate-improvement \
  --comparison refactor1-comparison.json \
  --output validation1.json

# Second validation references first
debtmap validate-improvement \
  --comparison refactor2-comparison.json \
  --previous-validation validation1.json \
  --output validation2.json

# Shows cumulative improvement trend
</code></pre>
<h3 id="cicd-integration-1"><a class="header" href="#cicd-integration-1">CI/CD Integration</a></h3>
<pre><code class="language-bash"># In CI pipeline: enforce minimum improvement for refactoring PRs
debtmap validate-improvement \
  --comparison comparison.json \
  --threshold 5.0 \
  --quiet || exit 1

# With output for CI reporting
debtmap validate-improvement \
  --comparison comparison.json \
  --threshold 5.0 \
  --format json \
  --output improvement-report.json

# Archive validation reports for tracking
</code></pre>
<p><strong>Use cases</strong>:</p>
<ul>
<li>Verify refactoring PRs actually reduce debt</li>
<li>Enforce improvement thresholds in code review</li>
<li>Track debt reduction trends over time</li>
<li>Validate that tech debt fixes are effective</li>
<li>Generate improvement metrics for reporting</li>
</ul>
<h3 id="troubleshooting-validation-failures"><a class="header" href="#troubleshooting-validation-failures">Troubleshooting Validation Failures</a></h3>
<pre><code class="language-bash"># Check the comparison file is valid
jq . comparison.json

# Verify before/after files were generated correctly
debtmap --format json --output before.json -v
# ... make changes ...
debtmap --format json --output after.json -v

# Lower threshold if being too strict
debtmap validate-improvement \
  --comparison comparison.json \
  --threshold 1.0  # Accept any improvement

# See detailed improvement breakdown
debtmap validate-improvement \
  --comparison comparison.json \
  --format markdown \
  --output improvement.md
</code></pre>
<h2 id="faq"><a class="header" href="#faq">FAQ</a></h2>
<h3 id="general-questions"><a class="header" href="#general-questions">General Questions</a></h3>
<p><strong>Q: Why is my analysis slow?</strong></p>
<p>A: Check several factors:</p>
<pre><code class="language-bash"># Use all CPU cores
debtmap --jobs 0

# Disable multi-pass for faster single-pass analysis
debtmap --no-multi-pass

# Try faster fallback mode
debtmap --semantic-off

# Check for large files or complex macros
debtmap -vv
</code></pre>
<p><strong>Q: What does ‘Parse error’ mean?</strong></p>
<p>A: File contains syntax debtmap cannot parse. Solutions:</p>
<ul>
<li>Try <code>--semantic-off</code> for fallback mode</li>
<li>Use <code>--verbose-macro-warnings</code> for Rust macros</li>
<li>Exclude problematic files in <code>.debtmap/config.toml</code></li>
<li>Report parse errors as potential bugs</li>
</ul>
<p><strong>Q: Why do scores differ between runs?</strong></p>
<p>A: Several factors affect scores:</p>
<ul>
<li>Coverage file changed (use <code>--coverage-file</code>)</li>
<li>Context providers enabled/disabled (<code>--context</code>)</li>
<li>Code changes (intended behavior)</li>
<li>Different threshold settings</li>
</ul>
<p><strong>Q: How do I reduce noise in results?</strong></p>
<p>A: Use filtering options:</p>
<pre><code class="language-bash"># Increase minimum priority
debtmap --min-priority 5

# Use threshold preset
debtmap --threshold-preset strict

# Filter categories
debtmap --filter "complexity,debt"

# Limit output
debtmap --top 20
</code></pre>
<h3 id="format-and-output"><a class="header" href="#format-and-output">Format and Output</a></h3>
<p><strong>Q: What’s the difference between legacy and unified JSON?</strong></p>
<p>A: Two JSON output formats:</p>
<ul>
<li><strong>Legacy</strong>: <code>{File: {...}}</code> - nested file-based structure</li>
<li><strong>Unified</strong>: Consistent structure with <code>type</code> field for each item</li>
</ul>
<pre><code class="language-bash"># Legacy (default)
debtmap --format json --output-format legacy

# Unified (recommended for parsing)
debtmap --format json --output-format unified
</code></pre>
<p><strong>Q: Can I analyze partial codebases?</strong></p>
<p>A: Yes, several approaches:</p>
<pre><code class="language-bash"># Limit file count
debtmap --max-files 100

# Analyze specific directory
debtmap src/specific/module

# Use filters in config
# .debtmap/config.toml:
# include = ["src/**/*.rs"]
</code></pre>
<p><strong>Q: How is the 0-10 priority score calculated?</strong></p>
<p>A: Debtmap uses a multiplicative risk-based scoring formula to compute priority scores:</p>
<p><strong>Core Formula</strong>:</p>
<pre><code>Final Score = base_risk × debt_factor × complexity_factor ×
              coverage_penalty × coverage_factor
</code></pre>
<p><strong>Base Risk Calculation</strong>:</p>
<pre><code>complexity_component = (cyclomatic × 0.3 + cognitive × 0.45) / 50.0
coverage_component = (100 - coverage_percentage) / 100.0 × 0.5
base_risk = (complexity_component + coverage_component) × 5.0
</code></pre>
<p><strong>Coverage Penalty</strong> (tiered based on test coverage):</p>
<ul>
<li><strong>&lt; 20% coverage</strong>: 3.0× penalty (critical)</li>
<li><strong>20-40% coverage</strong>: 2.0× penalty (high risk)</li>
<li><strong>40-60% coverage</strong>: 1.5× penalty (moderate risk)</li>
<li><strong>60-80% coverage</strong>: 1.2× penalty (low risk)</li>
<li><strong>≥ 80% coverage</strong>: 0.8× penalty (well tested - reduction)</li>
</ul>
<p><strong>Coverage Factor</strong> (additional reduction for well-tested code):</p>
<ul>
<li><strong>≥ 90% coverage</strong>: 0.8 (20% score reduction)</li>
<li><strong>70-90% coverage</strong>: 0.9 (10% score reduction)</li>
<li><strong>&lt; 70% coverage</strong>: 1.0 (no reduction)</li>
</ul>
<p><strong>Role-Based Adjustments</strong> (Evidence-Based Calculator):</p>
<ul>
<li><strong>Pure logic</strong>: 1.2× (testable, maintainable code)</li>
<li><strong>Entry points</strong>: 1.1× (public API boundaries)</li>
<li><strong>I/O wrappers</strong>: 0.7× (thin delegation layers)</li>
</ul>
<p><strong>Default Weights</strong>:</p>
<ul>
<li>Coverage weight: 0.5</li>
<li>Cyclomatic complexity weight: 0.3</li>
<li>Cognitive complexity weight: 0.45</li>
<li>Debt factor weight: 0.2</li>
</ul>
<p><strong>Example</strong>:</p>
<ul>
<li>Function: cyclomatic=15, cognitive=20, coverage=10%, role=entry_point</li>
<li>Complexity component: (15 × 0.3 + 20 × 0.45) / 50 = 0.27</li>
<li>Coverage component: (100 - 10) / 100 × 0.5 = 0.45</li>
<li>Base risk: (0.27 + 0.45) × 5.0 = 3.6</li>
<li>Coverage penalty: 3.0 (&lt; 20% coverage)</li>
<li>Coverage factor: 1.0 (&lt; 70% coverage)</li>
<li>Debt factor: ~1.2 (moderate debt patterns)</li>
<li>Complexity factor: ~1.3 (pattern-adjusted)</li>
<li>Final score: 3.6 × 1.2 × 1.3 × 3.0 × 1.0 × 1.1 (role) ≈ <strong>18.5</strong> (clamped to 10.0 scale)</li>
</ul>
<pre><code class="language-bash"># See score breakdown with verbosity
debtmap -v

# See detailed factor calculations including all multipliers
debtmap -vv
</code></pre>
<h3 id="coverage-and-testing"><a class="header" href="#coverage-and-testing">Coverage and Testing</a></h3>
<p><strong>Q: How does coverage affect scores?</strong></p>
<p>A: Coverage affects scores through two multiplicative factors in the risk calculation:</p>
<p><strong>1. Coverage Penalty</strong> (tiered multiplier based on test coverage):</p>
<ul>
<li><strong>&lt; 20% coverage</strong>: 3.0× penalty (untested code gets highest priority)</li>
<li><strong>20-40% coverage</strong>: 2.0× penalty</li>
<li><strong>40-60% coverage</strong>: 1.5× penalty</li>
<li><strong>60-80% coverage</strong>: 1.2× penalty</li>
<li><strong>≥ 80% coverage</strong>: 0.8× reduction (well-tested code deprioritized)</li>
</ul>
<p><strong>2. Coverage Factor</strong> (additional reduction for well-tested code):</p>
<ul>
<li><strong>≥ 90% coverage</strong>: 0.8 (20% score reduction)</li>
<li><strong>70-90% coverage</strong>: 0.9 (10% score reduction)</li>
<li><strong>&lt; 70% coverage</strong>: 1.0 (no additional reduction)</li>
</ul>
<p><strong>3. Base Risk Component</strong> (coverage weight: 0.5):</p>
<ul>
<li><code>coverage_component = (100 - coverage_percentage) / 100.0 × 0.5</code></li>
<li>Integrated into base risk calculation</li>
</ul>
<p><strong>Combined Effect</strong>:
Untested complex code (0% coverage) receives maximum penalties (3.0× coverage penalty), while well-tested code (≥90% coverage) receives both the 0.8× coverage penalty and 0.8× coverage factor, resulting in a 0.64× total reduction. This ensures untested code rises to the top of the priority list.</p>
<pre><code class="language-bash"># Use coverage file
debtmap --coverage-file coverage.info

# See coverage impact on scoring
debtmap --coverage-file coverage.info -v

# See detailed coverage penalty and factor breakdown
debtmap --coverage-file coverage.info -vv
</code></pre>
<p>See the FAQ entry “How is the 0-10 priority score calculated?” for complete scoring formula details.</p>
<p><strong>Q: What’s the difference between measured and estimated metrics?</strong></p>
<p>A: Debtmap provides both directly measured metrics and formula-based estimates:</p>
<p><strong>Measured Metrics</strong> (from AST analysis):</p>
<ul>
<li><code>cyclomatic_complexity</code>: Actual count of decision points in code</li>
<li><code>cognitive_complexity</code>: Weighted measure of code understandability</li>
<li><code>nesting_depth</code>: Maximum level of nested blocks</li>
<li><code>loc</code> (lines of code): Actual line count</li>
<li><code>parameters</code>: Number of function parameters</li>
<li><code>return_points</code>: Number of return statements</li>
</ul>
<p><strong>Estimated Metrics</strong> (formula-based):</p>
<ul>
<li><code>est_branches</code>: Estimated branch count for testing effort
<ul>
<li>Formula: <code>max(nesting_depth, 1) × cyclomatic_complexity ÷ 3</code></li>
<li>Not an actual count of branches in the AST</li>
<li>Represents estimated testing complexity/effort</li>
<li>Useful for understanding test coverage needs</li>
</ul>
</li>
</ul>
<pre><code class="language-bash"># See all metrics including estimates
debtmap -vv

# Example output:
# cyclomatic_complexity: 15    (measured from AST)
# cognitive_complexity: 20     (measured from AST)
# nesting_depth: 4             (measured from AST)
# est_branches: 20             (estimated: max(4,1) × 15 ÷ 3 = 20)
</code></pre>
<p><strong>When to trust estimated metrics</strong>:</p>
<ul>
<li>Comparing relative complexity between functions</li>
<li>Estimating testing effort</li>
<li>Understanding potential branching scenarios</li>
</ul>
<p><strong>When to rely on measured metrics</strong>:</p>
<ul>
<li>Precise complexity analysis</li>
<li>Setting hard thresholds</li>
<li>Exact cyclomatic/cognitive complexity values</li>
</ul>
<h3 id="context-and-analysis"><a class="header" href="#context-and-analysis">Context and Analysis</a></h3>
<p><strong>Q: What are context providers?</strong></p>
<p>A: Additional analysis for prioritization:</p>
<ul>
<li><strong>critical_path</strong>: Call graph analysis, entry point distance</li>
<li><strong>dependency</strong>: Dependency relationships and coupling</li>
<li><strong>git_history</strong>: Change frequency and authorship</li>
</ul>
<pre><code class="language-bash"># Enable all
debtmap --context

# Specific providers
debtmap --context --context-providers critical_path,dependency

# See context impact
debtmap --context -v
</code></pre>
<h3 id="results-and-comparison"><a class="header" href="#results-and-comparison">Results and Comparison</a></h3>
<p><strong>Q: Why no output?</strong></p>
<p>A: Check verbosity and filtering:</p>
<pre><code class="language-bash"># Increase verbosity
debtmap -v

# Lower priority threshold
debtmap --min-priority 0

# Check if files were analyzed
debtmap -vv 2&gt;&amp;1 | grep "Processed"

# Ensure not using strict threshold
debtmap --threshold-preset lenient
</code></pre>
<p><strong>Q: How to compare results over time?</strong></p>
<p>A: Use the <code>compare</code> command:</p>
<pre><code class="language-bash"># Save baseline
debtmap --format json --output before.json

# Make changes...

# Analyze again
debtmap --format json --output after.json

# Compare
debtmap compare --before before.json --after after.json
</code></pre>
<p><strong>Q: Why does compare fail with ‘incompatible formats’?</strong></p>
<p>A: The JSON files must use the same output format:</p>
<pre><code class="language-bash"># Use unified format for both
debtmap --format json --output-format unified --output before.json
# ... make changes ...
debtmap --format json --output-format unified --output after.json
debtmap compare --before before.json --after after.json

# Or use legacy format for both (but unified is recommended)
debtmap --format json --output-format legacy --output before.json
debtmap --format json --output-format legacy --output after.json
</code></pre>
<p><strong>Q: How do I compare results from different branches?</strong></p>
<p>A: Generate JSON output on each branch and compare:</p>
<pre><code class="language-bash"># On main branch
git checkout main
debtmap --format json --output main.json

# On feature branch
git checkout feature-branch
debtmap --format json --output feature.json

# Compare (from either branch)
debtmap compare --before main.json --after feature.json
</code></pre>
<p><strong>Q: Can I compare legacy and unified JSON formats?</strong></p>
<p>A: No, both files must use the same format. Regenerate with matching formats:</p>
<pre><code class="language-bash"># Convert both to unified format
debtmap --format json --output-format unified --output before.json
debtmap --format json --output-format unified --output after.json
debtmap compare --before before.json --after after.json
</code></pre>
<h3 id="performance-and-optimization"><a class="header" href="#performance-and-optimization">Performance and Optimization</a></h3>
<p><strong>Q: How many threads should I use?</strong></p>
<p>A: Depends on your machine:</p>
<pre><code class="language-bash"># Use all cores (default, recommended)
debtmap --jobs 0

# Limit to 4 threads (if other work running)
debtmap --jobs 4

# Single threaded (debugging only)
debtmap --no-parallel
</code></pre>
<h2 id="when-to-file-bug-reports"><a class="header" href="#when-to-file-bug-reports">When to File Bug Reports</a></h2>
<p>File a bug report when:</p>
<p>✅ <strong>These are bugs</strong>:</p>
<ul>
<li>Parse errors on valid syntax</li>
<li>Crashes or panics</li>
<li>Incorrect complexity calculations</li>
<li>Concurrency errors</li>
<li>Incorrect error messages</li>
</ul>
<p>❌ <strong>These are not bugs</strong>:</p>
<ul>
<li>Unsupported language constructs (file feature request)</li>
<li>Disagreement with complexity scores (subjective)</li>
<li>Performance on very large codebases (optimization request)</li>
<li>Missing documentation (docs issue, not code bug)</li>
</ul>
<h3 id="how-to-report-issues"><a class="header" href="#how-to-report-issues">How to Report Issues</a></h3>
<ol>
<li><strong>Reproduce with minimal example</strong></li>
<li><strong>Include debug output</strong>: <code>debtmap -vvv 2&gt;&amp;1 | tee error.log</code></li>
<li><strong>Include version</strong>: <code>debtmap --version</code></li>
<li><strong>Include platform</strong>: OS, Rust version if relevant</li>
<li><strong>Include configuration</strong>: <code>.debtmap/config.toml</code> if used</li>
<li><strong>Expected vs actual behavior</strong></li>
</ol>
<h3 id="before-filing"><a class="header" href="#before-filing">Before Filing</a></h3>
<ol>
<li>Check this troubleshooting guide</li>
<li>Try <code>--semantic-off</code> fallback mode</li>
<li>Update to latest version</li>
<li>Search existing issues on GitHub</li>
</ol>
<h2 id="related-documentation"><a class="header" href="#related-documentation">Related Documentation</a></h2>
<ul>
<li><strong><a href="./configuration.html">Configuration Guide</a></strong>: Configure debtmap behavior</li>
<li><strong><a href="./cli-reference.html">CLI Reference</a></strong>: Complete CLI flag documentation</li>
<li><strong><a href="./analysis-guide/index.html">Analysis Guide</a></strong>: Understanding analysis results</li>
<li><strong><a href="./examples.html">Examples</a></strong>: Practical usage examples</li>
<li><strong><a href="./api/index.html">API Documentation</a></strong>: Rust API documentation</li>
</ul>
<h2 id="troubleshooting-checklist"><a class="header" href="#troubleshooting-checklist">Troubleshooting Checklist</a></h2>
<p>When debugging issues, work through this checklist:</p>
<ul>
<li><input disabled="" type="checkbox"> Run with <code>-vv</code> to see detailed output</li>
<li><input disabled="" type="checkbox"> Try <code>--semantic-off</code> to use fallback mode</li>
<li><input disabled="" type="checkbox"> Check file permissions and paths</li>
<li><input disabled="" type="checkbox"> Verify configuration in <code>.debtmap/config.toml</code></li>
<li><input disabled="" type="checkbox"> Test with <code>--max-files 10</code> to isolate issues</li>
<li><input disabled="" type="checkbox"> Try <code>--no-parallel</code> to rule out concurrency</li>
<li><input disabled="" type="checkbox"> Check <code>debtmap --version</code> for updates</li>
<li><input disabled="" type="checkbox"> Review error messages in this guide</li>
<li><input disabled="" type="checkbox"> Search GitHub issues for similar problems</li>
<li><input disabled="" type="checkbox"> Create minimal reproduction case</li>
<li><input disabled="" type="checkbox"> File bug report with debug output</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="faq.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="faq.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
