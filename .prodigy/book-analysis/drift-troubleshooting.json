{
  "chapter_id": "troubleshooting",
  "chapter_title": "Troubleshooting",
  "chapter_file": "book/src/troubleshooting.md",
  "drift_detected": true,
  "severity": "medium",
  "quality_assessment": "Chapter is comprehensive and well-organized, but contains several references to features that may not exist or have changed in the actual implementation. The chapter would benefit from validation against the current codebase to ensure all CLI flags and features mentioned are accurate.",
  "issues": [
    {
      "type": "missing_verification",
      "severity": "medium",
      "section": "Debug Mode - Diagnostic Options",
      "description": "Chapter mentions '--validate-loc' flag but needs verification this exists and works as described",
      "current_content": "# Validate LOC consistency\ndebtmap --validate-loc",
      "should_verify": "Confirm --validate-loc flag exists in CLI and validates LOC consistency as described",
      "fix_suggestion": "Verify this flag exists in src/cli.rs and document what it actually validates",
      "source_reference": "src/cli.rs:206 (flag exists)"
    },
    {
      "type": "missing_verification",
      "severity": "medium",
      "section": "Performance Tips - Analysis Optimizations",
      "description": "Chapter mentions '--max-files' flag for limiting files analyzed",
      "current_content": "# Limit files for testing\ndebtmap --max-files 100",
      "should_verify": "Confirm --max-files flag exists and works as described",
      "fix_suggestion": "Verify this flag exists and document its exact behavior",
      "source_reference": "src/cli.rs:202 (flag exists)"
    },
    {
      "type": "missing_verification",
      "severity": "medium",
      "section": "Cache Troubleshooting - Cache Location Management",
      "description": "Chapter mentions '--migrate-cache' flag for migrating cache locations",
      "current_content": "# Migrate existing cache\ndebtmap --migrate-cache",
      "should_verify": "Confirm --migrate-cache flag exists and works as described",
      "fix_suggestion": "Verify this flag exists and document the migration process",
      "source_reference": "src/cli.rs:162 (flag exists)"
    },
    {
      "type": "missing_verification",
      "severity": "low",
      "section": "Debug Mode - Debugging Score Calculations",
      "description": "Chapter mentions '--explain-score' is deprecated and recommends using '-v' instead",
      "current_content": "# Show score breakdown (deprecated, use -v instead)\ndebtmap --explain-score",
      "should_verify": "Confirm --explain-score is marked as deprecated/hidden in CLI",
      "fix_suggestion": "Verify deprecation status and ensure warning message guides users to -v",
      "source_reference": "src/cli.rs:91-92 (deprecated and hidden)"
    },
    {
      "type": "incomplete_explanation",
      "severity": "low",
      "section": "Performance Tips - Parallel Processing",
      "description": "Chapter explains --jobs flag well, but doesn't mention relationship to --no-parallel",
      "current_content": "# Use all CPU cores (default)\ndebtmap --jobs 0\n\n# Limit to 4 threads\ndebtmap --jobs 4\n\n# Disable parallel processing (debugging)\ndebtmap --no-parallel",
      "should_add": "Clarify that --no-parallel is equivalent to --jobs 1 or explain the difference if there is one",
      "fix_suggestion": "Add a note explaining when to use --no-parallel vs --jobs 1",
      "source_reference": "src/cli.rs:134-139"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Output Formatting Issues",
      "description": "Chapter mentions 'compare' command but doesn't include it in main troubleshooting sections",
      "current_content": "debtmap compare --before before.json --after after.json",
      "should_add": "Add a troubleshooting section for the compare command, covering common comparison issues",
      "fix_suggestion": "Add section: 'Compare Command Issues' covering file format mismatches, missing files, etc.",
      "source_reference": "src/cli.rs:284-310 (Compare command exists)"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Advanced Features",
      "description": "Several advanced CLI flags are not covered in troubleshooting (multi-pass, attribution, aggregation options)",
      "should_add": "Add troubleshooting guidance for:\n- --multi-pass analysis issues\n- --attribution output problems\n- --aggregation-method options and effects\n- --min-problematic threshold behavior\n- --no-god-object flag purpose",
      "fix_suggestion": "Add 'Advanced Analysis Troubleshooting' section covering these lesser-known flags",
      "source_reference": "src/cli.rs:169-199"
    },
    {
      "type": "unclear_content",
      "severity": "low",
      "section": "Cache Troubleshooting - Cache Strategies",
      "description": "Cache comparison uses checkmarks and X marks that may not render well in all environments",
      "current_content": "**Local cache** (`.debtmap/cache`):\n- ✅ Isolated per project\n- ✅ Automatically managed\n- ❌ Duplicates across projects",
      "should_be": "Consider using ASCII alternatives or bullets for better compatibility:\n- Pros: Isolated per project, Automatically managed\n- Cons: Duplicates across projects",
      "fix_suggestion": "Replace emoji checkmarks with 'Pros:' and 'Cons:' headers or plain bullets",
      "source_reference": "book/src/troubleshooting.md:446-455"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "FAQ - Results and Comparison",
      "description": "Compare command is mentioned but lacks troubleshooting for common comparison errors",
      "should_add": "Add FAQ entries:\n- Q: Why does compare fail with 'incompatible formats'?\n- Q: How do I compare results from different branches?\n- Q: Can I compare legacy and unified JSON formats?",
      "fix_suggestion": "Expand FAQ section with compare command troubleshooting",
      "source_reference": "src/cli.rs:284-310"
    },
    {
      "type": "missing_best_practice",
      "severity": "low",
      "section": "When to File Bug Reports",
      "description": "Chapter has good bug reporting guidance but could add GitHub issue template reference",
      "should_add": "Reference to GitHub issue template or expected bug report format",
      "fix_suggestion": "Add: 'Use the bug report template at [link] when filing issues'",
      "source_reference": "book/src/troubleshooting.md:1213-1246"
    }
  ],
  "positive_aspects": [
    "Comprehensive coverage of common issues users are likely to encounter",
    "Well-organized with clear sections for different problem categories",
    "Good progression from quick fixes to detailed troubleshooting",
    "Excellent use of code examples showing both the problem and solution",
    "Strong FAQ section addressing common user questions",
    "Helpful troubleshooting checklist at the end",
    "Clear distinction between bugs and feature requests",
    "Good coverage of language-specific issues (Rust, Python, JS/TS)",
    "Thorough cache troubleshooting section with strategies",
    "Context provider troubleshooting is comprehensive",
    "Error messages reference section is valuable",
    "Debug mode section clearly explains verbosity levels"
  ],
  "improvement_suggestions": [
    "Add a 'Quick Start' troubleshooting flowchart or decision tree",
    "Include more real-world troubleshooting scenarios with step-by-step solutions",
    "Add section on troubleshooting the 'init' command and configuration files",
    "Include common .debtmap/config.toml configuration mistakes and fixes",
    "Add performance benchmarking guidance (how to measure if optimizations help)",
    "Consider adding a 'Known Issues' section for documented bugs or limitations",
    "Add troubleshooting for CI/CD integration scenarios",
    "Include guidance on troubleshooting in Docker/containerized environments",
    "Add section on interpreting and acting on validation command failures",
    "Consider adding screenshots or terminal output examples for common errors",
    "Add cross-references to related documentation sections more consistently",
    "Include version compatibility notes (e.g., 'feature X added in v1.2.0')"
  ],
  "metadata": {
    "analyzed_at": "2025-01-13",
    "feature_inventory": "Analyzed directly from src/cli.rs (features.json not available)",
    "topics_covered": [
      "Common issues",
      "Debug mode",
      "Performance tips",
      "Cache troubleshooting",
      "Context provider troubleshooting",
      "Error messages reference",
      "Language-specific issues",
      "Output formatting",
      "FAQ",
      "Bug reporting"
    ],
    "validation_focus": "Check troubleshooting covers common user issues",
    "analysis_method": "Direct codebase comparison via src/cli.rs inspection",
    "cli_flags_verified": [
      "--semantic-off",
      "--cache-stats",
      "--clear-cache",
      "--verbose-macro-warnings",
      "--show-macro-stats",
      "--explain-score (deprecated)",
      "--jobs",
      "--no-parallel",
      "--max-files",
      "--validate-loc",
      "--migrate-cache"
    ]
  }
}
