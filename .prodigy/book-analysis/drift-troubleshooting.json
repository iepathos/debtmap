{
  "chapter_id": "troubleshooting",
  "chapter_title": "Troubleshooting",
  "chapter_file": "book/src/troubleshooting.md",
  "drift_detected": true,
  "severity": "low",
  "quality_assessment": "Chapter is comprehensive, well-organized, and highly accurate. All major CLI flags are correctly documented. Only minor improvements needed for completeness: adding recently added advanced flags (--detail-level, --aggregate-only, --no-aggregation), documenting Compare command's optional --plan and --target-location flags, and noting that some deprecated flags are now hidden.",
  "issues": [
    {
      "type": "outdated_information",
      "severity": "low",
      "section": "Debug Mode - Line 258",
      "description": "Chapter mentions '--explain-score' flag as 'deprecated, use -v instead'. Flag is confirmed deprecated and hidden in CLI",
      "current_content": "# Show score breakdown (deprecated, use -v instead)\ndebtmap --explain-score",
      "should_be": "Note: --explain-score flag has been deprecated and is now hidden. Use -v, -vv, or -vvv for verbosity instead.",
      "fix_suggestion": "Update the example to emphasize using -v levels instead of mentioning the hidden flag, or remove this example entirely",
      "source_reference": "src/cli.rs:90-92 - #[arg(long = \"explain-score\", hide = true)]"
    },
    {
      "type": "outdated_information",
      "severity": "low",
      "section": "Performance Tips - Caching",
      "description": "Chapter correctly states caching is enabled by default, but doesn't mention --cache flag is now hidden",
      "current_content": "Caching is **enabled by default** and provides the biggest performance improvement.",
      "should_add": "Note that the --cache flag (to enable caching) is deprecated and hidden. Caching is now always enabled by default; use --no-cache to disable.",
      "fix_suggestion": "Add clarification: 'Note: The --cache flag no longer exists (deprecated and hidden). Caching is enabled by default; use --no-cache to disable it.'",
      "source_reference": "src/cli.rs:141-143 - #[arg(long = \"cache\", hide = true)]"
    },
    {
      "type": "incomplete_explanation",
      "severity": "low",
      "section": "Performance Tips - Parallel Processing - Line 304",
      "description": "Chapter correctly documents --no-parallel and notes it's for debugging, could clarify the relationship with --jobs",
      "current_content": "# Disable parallel processing (debugging)\n# Note: --no-parallel is equivalent to --jobs 1 (single-threaded)\ndebtmap --no-parallel",
      "should_add": "The chapter already has a note about equivalence, which is accurate",
      "fix_suggestion": "No change needed - chapter correctly documents this. The note at line 304 states '--no-parallel is equivalent to --jobs 1 (single-threaded)'",
      "source_reference": "src/cli.rs:134-139 - Both flags exist"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Advanced Analysis Troubleshooting - Aggregation Methods - Line 664",
      "description": "Chapter mentions aggregation methods but doesn't list all available options explicitly",
      "current_content": "# Alternative methods (check --help for available options)\ndebtmap --aggregation-method <method>",
      "should_add": "Document the actual aggregation methods: sum, weighted_sum (default), logarithmic_sum, max_plus_average",
      "fix_suggestion": "Replace generic placeholder with specific examples:\n# Available aggregation methods:\ndebtmap --aggregation-method sum\ndebtmap --aggregation-method weighted_sum  # (default)\ndebtmap --aggregation-method logarithmic_sum\ndebtmap --aggregation-method max_plus_average",
      "source_reference": "src/cli.rs:189-191 - aggregation_method with default_value = \"weighted_sum\""
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Advanced Analysis Troubleshooting",
      "description": "Chapter covers multi-pass, attribution, aggregation-method, min-problematic, and no-god-object, but missing newer flags",
      "should_add": "Add documentation for:\n- --detail-level <level> (summary, standard, comprehensive, debug)\n- --aggregate-only (show only aggregated file-level scores)\n- --no-aggregation (disable file-level aggregation)\n- Note that these are advanced flags for specialized use cases",
      "fix_suggestion": "Add subsections for:\n1. Detail Level Control (--detail-level)\n2. Aggregation Control (--aggregate-only, --no-aggregation)",
      "source_reference": "src/cli.rs:177-187 - detail_level, aggregate_only, no_aggregation flags"
    },
    {
      "type": "incorrect_example",
      "severity": "low",
      "section": "Compare Command Issues - Line 1138",
      "description": "Compare command examples don't show optional --plan and --target-location flags for targeted comparison",
      "current_content": "debtmap compare --before before.json --after after.json",
      "should_add": "Show optional flags for targeted debt analysis:\ndebtmap compare --before before.json --after after.json --plan implementation-plan.json\ndebtmap compare --before before.json --after after.json --target-location src/main.rs:calculate_score:42",
      "fix_suggestion": "Add examples showing --plan and --target-location usage for focused debt comparison at specific code locations",
      "source_reference": "src/cli.rs:295-301 - plan and target_location options in Compare command"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Compare Command Issues",
      "description": "Chapter doesn't mention Compare command's default output format is JSON (unlike analyze which defaults to terminal)",
      "current_content": "Basic compare usage shown without noting output format",
      "should_add": "Note that compare command defaults to JSON output format. Use --format terminal for terminal output or --format markdown for markdown reports.",
      "fix_suggestion": "Add note in Compare Command Issues section:\n**Note**: The compare command defaults to JSON output format (unlike analyze which defaults to terminal). Use `--format terminal` or `--format markdown` if you need different output.",
      "source_reference": "src/cli.rs:304 - format default_value = \"json\" for Compare vs src/cli.rs:31 - format default_value = \"terminal\" for Analyze"
    },
    {
      "type": "incomplete_explanation",
      "severity": "low",
      "section": "Validate Command",
      "description": "Chapter briefly mentions Validate command but doesn't document --max-debt-density flag",
      "current_content": "Validate command mentioned in passing",
      "should_add": "Document --max-debt-density flag for Validate command:\n\n### Debt Density Validation\n\n```bash\n# Set maximum acceptable debt density (per 1000 LOC)\ndebtmap validate /path --max-debt-density 10.0\n\n# Validation will fail if debt density exceeds threshold\n# Useful for CI/CD pipelines to enforce quality gates\n```",
      "fix_suggestion": "Add Validate command section to troubleshooting with --max-debt-density documentation",
      "source_reference": "src/cli.rs:217-282 - Validate command with max_debt_density at lines 252-254"
    }
  ],
  "positive_aspects": [
    "Comprehensive coverage of common issues and practical solutions",
    "Excellent structure: Quick Fixes at top, detailed sections below",
    "Well-organized with clear section hierarchy",
    "Excellent use of code examples showing both problems and solutions",
    "Strong FAQ section addressing real user questions",
    "Helpful troubleshooting checklist at the end for systematic debugging",
    "Clear distinction between bugs and feature requests",
    "Thorough coverage of language-specific issues (Rust macros, Python types, JS/TS)",
    "Comprehensive cache troubleshooting with practical strategies",
    "Context provider troubleshooting is detailed and accurate",
    "Error messages reference section provides actionable solutions",
    "Debug mode section clearly explains verbosity levels (-v, -vv, -vvv)",
    "Performance tips are practical and measurable",
    "Compare command has dedicated troubleshooting section",
    "Advanced analysis flags are documented with use cases",
    "All major CLI flags are accurately documented and verified against source",
    "Good balance of beginner-friendly quick fixes and advanced topics"
  ],
  "improvement_suggestions": [
    "Add documentation for --detail-level flag (summary, standard, comprehensive, debug)",
    "Add documentation for --aggregate-only and --no-aggregation flags",
    "Document all aggregation methods explicitly: sum, weighted_sum, logarithmic_sum, max_plus_average",
    "Add Compare command's --plan and --target-location flags with examples",
    "Note that Compare command defaults to JSON output (unlike Analyze which defaults to terminal)",
    "Add Validate command section with --max-debt-density flag documentation",
    "Clarify that deprecated --cache and --explain-score flags are now hidden",
    "Consider adding a 'Recently Changed Flags' section for users upgrading versions",
    "Add more CI/CD integration troubleshooting scenarios",
    "Include common .debtmap/config.toml configuration mistakes and fixes",
    "Add version compatibility notes for features (e.g., 'flag X added in v0.2.5')"
  ],
  "metadata": {
    "analyzed_at": "2025-10-14",
    "feature_inventory": "src/cli.rs - direct codebase analysis",
    "topics_covered": [
      "Quick fixes for common issues",
      "Parse errors",
      "Out of memory errors",
      "Performance issues and optimization",
      "Cache corruption and troubleshooting",
      "File permission errors",
      "Git history errors",
      "Coverage file issues",
      "Threshold and preset configuration",
      "JSON format issues",
      "Context provider troubleshooting",
      "Debug mode and verbosity levels",
      "Advanced analysis flags",
      "Error messages reference",
      "Language-specific issues (Rust, Python, JS/TS)",
      "Output formatting",
      "Compare command",
      "FAQ",
      "Bug reporting guidelines"
    ],
    "validation_focus": "Check troubleshooting covers common user issues",
    "analysis_method": "Direct codebase comparison via src/cli.rs inspection and chapter content review",
    "cli_flags_verified": [
      "--semantic-off (line 87)",
      "--cache-stats (line 158)",
      "--clear-cache (line 150)",
      "--force-cache-rebuild (line 154)",
      "--migrate-cache (line 162)",
      "--cache-location (line 166)",
      "--verbose-macro-warnings (line 102)",
      "--show-macro-stats (line 106)",
      "--explain-score (deprecated, hidden - line 91)",
      "--cache (deprecated, hidden - line 142)",
      "-v/-vv/-vvv verbosity (line 98)",
      "--jobs (line 138)",
      "--no-parallel (line 134)",
      "--max-files (line 202)",
      "--validate-loc (line 206)",
      "--context (line 63)",
      "--context-providers (line 67)",
      "--disable-context (line 71)",
      "--multi-pass (line 170)",
      "--attribution (line 174)",
      "--aggregation-method (line 190)",
      "--min-problematic (line 194)",
      "--no-god-object (line 198)",
      "--plain (line 130)",
      "--top/--tail (lines 75, 79)",
      "--summary (line 83)",
      "--min-priority (line 114)",
      "--filter (line 118)",
      "--no-context-aware (line 122)",
      "--threshold-preset (line 126)"
    ],
    "flags_needing_documentation": [
      "--detail-level (line 178)",
      "--aggregate-only (line 182)",
      "--no-aggregation (line 186)",
      "Compare --plan (line 295)",
      "Compare --target-location (line 300)",
      "Validate --max-debt-density (line 253)"
    ]
  }
}
