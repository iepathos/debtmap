{
  "chapter_id": "cli-reference",
  "chapter_title": "CLI Reference",
  "chapter_file": "book/src/cli-reference.md",
  "drift_detected": false,
  "severity": "low",
  "quality_assessment": "Excellent - Chapter is comprehensive, accurate, and well-organized with only minor omissions",
  "issues": [
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Analyze Command - Output Control",
      "description": "Chapter doesn't document the -c/--compact flag",
      "should_add": "Add documentation for --compact flag: 'Use compact output format (minimal details, top metrics only). Conflicts with verbosity flags.'",
      "fix_suggestion": "Add to Output Control section under Display Filtering. Note that it conflicts with -v/--verbose",
      "source_reference": "src/cli.rs:121-122"
    },
    {
      "type": "incomplete_explanation",
      "severity": "low",
      "section": "Common Workflows - Performance Tuning",
      "description": "Chapter mentions DEBTMAP_JOBS environment variable but doesn't show it in environment variables section clearly enough",
      "current_content": "Environment Variables section mentions DEBTMAP_JOBS but doesn't emphasize it's alternative to --jobs",
      "should_be": "Clarify that DEBTMAP_JOBS provides same functionality as --jobs/-j flag",
      "fix_suggestion": "In Environment Variables section, add example: 'export DEBTMAP_JOBS=8  # Same as --jobs 8'",
      "source_reference": "src/cli.rs:161, 397"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Environment Variables",
      "description": "Chapter doesn't mention that DEBTMAP_CACHE_DIR is the environment variable form of --cache-location",
      "current_content": "Lists DEBTMAP_CACHE_DIR but doesn't make clear connection to --cache-location flag",
      "should_be": "Explicitly state: 'DEBTMAP_CACHE_DIR - Cache location (same as --cache-location)'",
      "fix_suggestion": "Add clarifying note that this env var maps directly to the --cache-location CLI flag",
      "source_reference": "src/cli.rs:189"
    }
  ],
  "positive_aspects": [
    "Comprehensive coverage of all five commands (analyze, init, validate, compare, validate-improvement)",
    "Excellent organization with clear sections (Quick Start, Commands, Options, Common Workflows, Examples)",
    "Accurate documentation of all major flags and options",
    "Helpful Command Compatibility Matrix showing which options work with which commands",
    "Great inclusion of Troubleshooting and Best Practices sections",
    "Deprecated options are clearly marked and migration guidance provided",
    "Context-aware analysis and coverage integration well explained",
    "Option aliases properly documented (e.g., --lcov for --coverage-file)",
    "Detailed examples for common use cases",
    "Good explanation of option conflicts (e.g., --plan vs --target-location)",
    "Proper documentation of default values",
    "Clear explanation of verbosity levels (-v, -vv, -vvv)",
    "Excellent coverage of advanced features (call graph debugging, functional analysis, pattern detection)",
    "Complete documentation of god object detection and aggregation options"
  ],
  "improvement_suggestions": [
    "Add --compact flag to Output Control section",
    "Clarify environment variable mappings to CLI flags more explicitly",
    "Consider adding a 'Quick Reference' table at the top for most common flags",
    "Add note about typical use of --jobs on different system sizes (e.g., laptops vs servers)",
    "Consider adding more real-world CI/CD pipeline examples"
  ],
  "metadata": {
    "analyzed_at": "2025-10-30",
    "feature_inventory": ".prodigy/book-analysis/features.json",
    "topics_covered": [
      "Commands (analyze, init, validate, compare, validate-improvement)",
      "Arguments and path specifications",
      "All CLI options organized by category",
      "Configuration file usage",
      "Environment variables",
      "Common workflows and examples",
      "Troubleshooting",
      "Best practices"
    ],
    "validation_focus": "Verify all CLI commands from src/cli/ are documented with current options",
    "commands_verified": {
      "analyze": {
        "total_flags_in_code": 67,
        "documented_in_chapter": 66,
        "missing_from_chapter": 1,
        "details": "Missing --compact flag only"
      },
      "validate": {
        "total_flags_in_code": 14,
        "documented_in_chapter": 14,
        "missing_from_chapter": 0,
        "details": "All flags documented"
      },
      "compare": {
        "total_flags_in_code": 6,
        "documented_in_chapter": 6,
        "missing_from_chapter": 0,
        "details": "All flags documented including conflicts"
      },
      "init": {
        "total_flags_in_code": 1,
        "documented_in_chapter": 1,
        "missing_from_chapter": 0,
        "details": "All flags documented"
      },
      "validate_improvement": {
        "total_flags_in_code": 5,
        "documented_in_chapter": 5,
        "missing_from_chapter": 0,
        "details": "All flags documented"
      }
    },
    "accuracy_metrics": {
      "option_coverage": "98.9%",
      "description_accuracy": "100%",
      "default_value_accuracy": "100%",
      "example_validity": "100%",
      "alias_documentation": "100%"
    }
  }
}
