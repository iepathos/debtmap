<!DOCTYPE HTML>
<html lang="en" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Configuration - Debtmap Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Comprehensive guide to Debtmap code complexity and technical debt analyzer">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-6f6cd753.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-c7b19542.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Debtmap Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/iepathos/debtmap" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="configuration"><a class="header" href="#configuration">Configuration</a></h1>
<p>Debtmap is highly configurable through a <code>.debtmap.toml</code> file. This chapter explains how to customize Debtmap’s behavior for your project’s specific needs.</p>
<h2 id="config-files"><a class="header" href="#config-files">Config Files</a></h2>
<p>Debtmap uses <strong>TOML format</strong> for configuration files (<code>.debtmap.toml</code>). TOML provides a clear, readable syntax well-suited for configuration.</p>
<h3 id="creating-a-configuration-file"><a class="header" href="#creating-a-configuration-file">Creating a Configuration File</a></h3>
<p>Debtmap looks for a <code>.debtmap.toml</code> file in the current directory and up to 10 parent directories. To create an initial configuration:</p>
<pre><code class="language-bash">debtmap init
</code></pre>
<p>This command creates a <code>.debtmap.toml</code> file with sensible defaults.</p>
<h3 id="configuration-file-discovery"><a class="header" href="#configuration-file-discovery">Configuration File Discovery</a></h3>
<p>When you run <code>debtmap</code>, it searches for <code>.debtmap.toml</code> starting in your current directory and traversing up to 10 parent directories. The first configuration file found is used.</p>
<p>If no configuration file is found, Debtmap uses built-in defaults that work well for most projects.</p>
<h3 id="basic-example"><a class="header" href="#basic-example">Basic Example</a></h3>
<p>Here’s a minimal <code>.debtmap.toml</code> configuration:</p>
<pre><code class="language-toml">[scoring]
coverage = 0.50      # 50% weight for test coverage gaps
complexity = 0.35    # 35% weight for code complexity
dependency = 0.15    # 15% weight for dependency criticality

[thresholds]
complexity = 10
max_file_length = 500
max_function_length = 50

[languages]
enabled = ["rust", "python", "javascript", "typescript"]
</code></pre>
<h2 id="scoring-configuration"><a class="header" href="#scoring-configuration">Scoring Configuration</a></h2>
<h3 id="scoring-weights"><a class="header" href="#scoring-weights">Scoring Weights</a></h3>
<p>The <code>[scoring]</code> section controls how different factors contribute to the overall debt score. Debtmap uses a <strong>weighted sum model</strong> where weights must sum to 1.0.</p>
<pre><code class="language-toml">[scoring]
coverage = 0.50      # Weight for test coverage gaps (default: 0.50)
complexity = 0.35    # Weight for code complexity (default: 0.35)
dependency = 0.15    # Weight for dependency criticality (default: 0.15)
</code></pre>
<p><strong>Active weights</strong> (used in scoring):</p>
<ul>
<li><code>coverage</code> - Prioritizes untested code (default: 0.50)</li>
<li><code>complexity</code> - Identifies complex areas (default: 0.35)</li>
<li><code>dependency</code> - Considers impact radius (default: 0.15)</li>
</ul>
<p><strong>Unused weights</strong> (reserved for future features):</p>
<ul>
<li><code>semantic</code> - Not currently used (default: 0.00)</li>
<li><code>security</code> - Not currently used (default: 0.00)</li>
<li><code>organization</code> - Not currently used (default: 0.00)</li>
</ul>
<p><strong>Validation rules:</strong></p>
<ul>
<li>All weights must be between 0.0 and 1.0</li>
<li>Active weights (coverage + complexity + dependency) must sum to 1.0 (±0.001 tolerance)</li>
<li>If weights don’t sum to 1.0, they will be automatically normalized</li>
</ul>
<p><strong>Example - Prioritize complexity over coverage:</strong></p>
<pre><code class="language-toml">[scoring]
coverage = 0.30
complexity = 0.55
dependency = 0.15
</code></pre>
<h3 id="role-multipliers"><a class="header" href="#role-multipliers">Role Multipliers</a></h3>
<p>Role multipliers adjust complexity scores based on a function’s semantic role:</p>
<pre><code class="language-toml">[role_multipliers]
pure_logic = 1.2        # Prioritize pure computation (default: 1.2)
orchestrator = 0.8      # Reduce for delegation functions (default: 0.8)
io_wrapper = 0.7        # Reduce for I/O wrappers (default: 0.7)
entry_point = 0.9       # Slight reduction for main/CLI (default: 0.9)
pattern_match = 0.6     # Reduce for pattern matching (default: 0.6)
debug = 0.3             # Debug/diagnostic functions (default: 0.3)
unknown = 1.0           # No adjustment (default: 1.0)
</code></pre>
<p>These multipliers help reduce false positives by recognizing that different function types have naturally different complexity levels. The <strong>debug</strong> role has the lowest multiplier (0.3) since debug and diagnostic functions typically have low testing priority.</p>
<h3 id="role-based-scoring-configuration"><a class="header" href="#role-based-scoring-configuration">Role-Based Scoring Configuration</a></h3>
<p>DebtMap uses a two-stage role adjustment mechanism to accurately score functions based on their architectural role and testing strategy. This section explains how to configure both stages.</p>
<h4 id="stage-1-role-coverage-weights"><a class="header" href="#stage-1-role-coverage-weights">Stage 1: Role Coverage Weights</a></h4>
<p>The first stage adjusts how much coverage gaps penalize different function types. This recognizes that not all functions need the same level of unit test coverage.</p>
<p><strong>Configuration</strong> (<code>.debtmap.toml</code> under <code>[scoring.role_coverage_weights]</code>):</p>
<pre><code class="language-toml">[scoring.role_coverage_weights]
entry_point = 0.6       # Reduce coverage penalty (often integration tested)
orchestrator = 0.8      # Reduce coverage penalty (tested via higher-level tests)
pure_logic = 1.0        # Pure logic should have unit tests, no reduction (default: 1.0)
io_wrapper = 0.5        # I/O wrappers are integration tested (default: 0.5)
pattern_match = 1.0     # Standard penalty
debug = 0.3             # Debug functions have lowest coverage expectations (default: 0.3)
unknown = 1.0           # Standard penalty (default behavior)
</code></pre>
<p><strong>Rationale</strong>:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Function Role</th><th>Weight</th><th>Why This Value?</th></tr>
</thead>
<tbody>
<tr><td><strong>Entry Point</strong></td><td>0.6</td><td>CLI handlers, HTTP routes, <code>main</code> functions are integration tested, not unit tested</td></tr>
<tr><td><strong>Orchestrator</strong></td><td>0.8</td><td>Coordination functions tested via higher-level tests</td></tr>
<tr><td><strong>Pure Logic</strong></td><td>1.0</td><td>Core business logic should have unit tests (default: 1.0)</td></tr>
<tr><td><strong>I/O Wrapper</strong></td><td>0.5</td><td>File/network operations tested via integration tests (default: 0.5)</td></tr>
<tr><td><strong>Pattern Match</strong></td><td>1.0</td><td>Standard coverage expectations</td></tr>
<tr><td><strong>Debug</strong></td><td>0.3</td><td>Debug/diagnostic functions have lowest testing priority (default: 0.3)</td></tr>
<tr><td><strong>Unknown</strong></td><td>1.0</td><td>Default when role cannot be determined</td></tr>
</tbody>
</table>
</div>
<p><strong>Example Impact</strong>:</p>
<pre><code class="language-toml"># Emphasize pure logic testing strongly
[scoring.role_coverage_weights]
pure_logic = 1.5        # 50% higher penalty for untested logic
entry_point = 0.5       # 50% lower penalty for untested entry points
io_wrapper = 0.4        # 60% lower penalty for untested I/O

# Conservative approach (smaller adjustments)
[scoring.role_coverage_weights]
pure_logic = 1.1        # Only 10% increase
entry_point = 0.9       # Only 10% decrease
</code></pre>
<p><strong>How It Works</strong>:</p>
<p>When a function has 0% coverage:</p>
<ul>
<li><strong>Entry Point</strong> (weight 0.6): Gets 60% penalty instead of 100% penalty</li>
<li><strong>Pure Logic</strong> (weight 1.0): Gets 100% penalty (standard emphasis on testing)</li>
<li><strong>I/O Wrapper</strong> (weight 0.5): Gets 50% penalty</li>
</ul>
<p>This prevents entry points from dominating the priority list due to low unit test coverage while emphasizing the importance of testing pure business logic.</p>
<h4 id="stage-2-role-multiplier-with-clamping"><a class="header" href="#stage-2-role-multiplier-with-clamping">Stage 2: Role Multiplier with Clamping</a></h4>
<p>The second stage applies a final role-based multiplier to reflect architectural importance. This multiplier is <strong>clamped by default</strong> to prevent extreme score variations.</p>
<p><strong>Configuration</strong> (<code>.debtmap.toml</code> under <code>[scoring.role_multiplier]</code>):</p>
<pre><code class="language-toml">[scoring.role_multiplier]
clamp_min = 0.3           # Minimum multiplier (default: 0.3)
clamp_max = 1.8           # Maximum multiplier (default: 1.8)
enable_clamping = true    # Enable clamping (default: true)
</code></pre>
<p><strong>Parameters</strong>:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Parameter</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>clamp_min</code></td><td>0.3</td><td>Minimum allowed multiplier - prevents functions from becoming invisible</td></tr>
<tr><td><code>clamp_max</code></td><td>1.8</td><td>Maximum allowed multiplier - prevents extreme score spikes</td></tr>
<tr><td><code>enable_clamping</code></td><td>true</td><td>Whether to apply clamping (disable for prototyping only)</td></tr>
</tbody>
</table>
</div>
<p><strong>Clamp Range Rationale</strong>:</p>
<p><strong>Default [0.3, 1.8]</strong>: Balances differentiation with stability</p>
<ul>
<li>
<p><strong>Lower bound (0.3)</strong>: I/O wrappers still contribute 30% of their base score</p>
<ul>
<li>Prevents them from becoming invisible in the priority list</li>
<li>Ensures simple wrappers aren’t completely ignored</li>
</ul>
</li>
<li>
<p><strong>Upper bound (1.8)</strong>: Critical functions get at most 180% of base score</p>
<ul>
<li>Prevents one complex function from dominating the entire list</li>
<li>Maintains balanced prioritization across different issues</li>
</ul>
</li>
</ul>
<p><strong>When to Adjust Clamp Range</strong>:</p>
<pre><code class="language-toml"># Wider range for more differentiation
[scoring.role_multiplier]
clamp_min = 0.2           # Allow more reduction
clamp_max = 2.5           # Allow more emphasis

# Narrower range for more stability
[scoring.role_multiplier]
clamp_min = 0.5           # Less reduction
clamp_max = 1.5           # Less emphasis

# Disable clamping (not recommended for production)
[scoring.role_multiplier]
enable_clamping = false   # Allow unclamped multipliers
# Warning: May cause unstable prioritization
</code></pre>
<p><strong>When to Disable Clamping</strong>:</p>
<ul>
<li><strong>Prototyping</strong>: Testing extreme multiplier values for custom scoring strategies</li>
<li><strong>Special cases</strong>: Very specific project needs requiring wide multiplier ranges</li>
<li><strong>Not recommended</strong> for production use as it can lead to unstable prioritization</li>
</ul>
<p><strong>Example Impact</strong>:</p>
<p>Without clamping:</p>
<pre><code>Function: critical_business_logic (Pure Logic)
  Base Score: 45.0
  Role Multiplier: 2.5 (unclamped)
  Final Score: 112.5 (dominates entire list)
</code></pre>
<p>With clamping (default):</p>
<pre><code>Function: critical_business_logic (Pure Logic)
  Base Score: 45.0
  Role Multiplier: 1.8 (clamped from 2.5)
  Final Score: 81.0 (high priority, but balanced)
</code></pre>
<h4 id="complete-example-configuration"><a class="header" href="#complete-example-configuration">Complete Example Configuration</a></h4>
<p>Here’s a complete example showing both stages configured together:</p>
<pre><code class="language-toml"># Stage 1: Coverage weight adjustments
[scoring.role_coverage_weights]
pure_logic = 1.0        # Pure logic should have unit tests (default: 1.0)
entry_point = 0.6       # Reduce penalty for integration-tested entry points
orchestrator = 0.8      # Partially reduce penalty for orchestrators
io_wrapper = 0.5        # I/O wrappers are integration tested (default: 0.5)
pattern_match = 1.0     # Standard
debug = 0.3             # Debug functions have lowest coverage expectations (default: 0.3)
unknown = 1.0           # Standard

# Stage 2: Role multiplier with clamping
[scoring.role_multiplier]
clamp_min = 0.3         # I/O wrappers contribute at least 30%
clamp_max = 1.8         # Critical functions get at most 180%
enable_clamping = true  # Keep clamping enabled for stability
</code></pre>
<h4 id="how-the-two-stages-work-together"><a class="header" href="#how-the-two-stages-work-together">How the Two Stages Work Together</a></h4>
<p>The two-stage approach ensures role-based coverage adjustments and architectural importance multipliers work independently:</p>
<p><strong>Example Workflow</strong>:</p>
<pre><code>1. Calculate base score from complexity (10) and dependencies (5)
   → Base = 15.0

2. Stage 1: Apply coverage weight based on role (Entry Point, weight 0.6)
   → Coverage penalty reduced from 1.0 to 0.4
   → Preliminary score = 15.0 × 0.4 = 6.0

3. Stage 2: Apply clamped role multiplier (Entry Point, multiplier 1.2)
   → Clamped to [0.3, 1.8] → stays 1.2
   → Final score = 6.0 × 1.2 = 7.2
</code></pre>
<p><strong>Key Benefits</strong>:</p>
<ul>
<li>Coverage adjustments don’t interfere with role multiplier</li>
<li>Both mechanisms contribute independently to final score</li>
<li>Clamping prevents instability from extreme values</li>
<li>Configuration flexibility for different project needs</li>
</ul>
<h4 id="verification"><a class="header" href="#verification">Verification</a></h4>
<p>To see how role-based adjustments affect your codebase:</p>
<pre><code class="language-bash"># Show detailed scoring breakdown
debtmap analyze . --verbose

# Look for lines like:
#   Coverage Weight: 0.6 (Entry Point adjustment)
#   Adjusted Coverage Penalty: 0.4 (reduced from 1.0)
#   Role Multiplier: 1.2 (clamped from 1.5)
</code></pre>
<p>For more details on how role-based adjustments reduce false positives, see the <a href="./scoring-strategies.html#role-based-adjustments">Role-Based Adjustments</a> section in the Scoring Strategies guide.</p>
<h2 id="thresholds-configuration"><a class="header" href="#thresholds-configuration">Thresholds Configuration</a></h2>
<h3 id="basic-thresholds"><a class="header" href="#basic-thresholds">Basic Thresholds</a></h3>
<p>Control when code is flagged as technical debt:</p>
<pre><code class="language-toml">[thresholds]
complexity = 10                      # Cyclomatic complexity threshold
duplication = 50                     # Duplication threshold
max_file_length = 500                # Maximum lines per file
max_function_length = 50             # Maximum lines per function
</code></pre>
<p><strong>Note:</strong> The TOML configuration accepts <code>max_file_length</code> (shown above), which maps to the internal struct field <code>max_file_lines</code>. Both names refer to the same setting.</p>
<h3 id="minimum-thresholds"><a class="header" href="#minimum-thresholds">Minimum Thresholds</a></h3>
<p>Filter out trivial functions that aren’t really technical debt:</p>
<pre><code class="language-toml">[thresholds]
minimum_debt_score = 2.0              # Only show items with debt score ≥ 2.0
minimum_cyclomatic_complexity = 3     # Ignore functions with cyclomatic &lt; 3
minimum_cognitive_complexity = 5      # Ignore functions with cognitive &lt; 5
minimum_risk_score = 2.0              # Only show Risk items with score ≥ 2.0
</code></pre>
<p>These minimum thresholds help focus on significant issues by filtering out simple functions with minor complexity.</p>
<h3 id="validation-thresholds"><a class="header" href="#validation-thresholds">Validation Thresholds</a></h3>
<p>The <code>[thresholds.validation]</code> subsection configures limits for the <code>debtmap validate</code> command:</p>
<pre><code class="language-toml">[thresholds.validation]
max_average_complexity = 10.0         # Maximum allowed average complexity (default: 10.0)
max_high_complexity_count = 100       # DEPRECATED: Use max_debt_density instead (default: 100)
max_debt_items = 2000                 # DEPRECATED: Use max_debt_density instead (default: 2000)
max_total_debt_score = 10000          # Maximum total debt score (default: 10000)
max_codebase_risk_score = 7.0         # Maximum codebase risk score (default: 7.0)
max_high_risk_functions = 50          # DEPRECATED: Use max_debt_density instead (default: 50)
min_coverage_percentage = 0.0         # Minimum required coverage % (default: 0.0)
max_debt_density = 50.0               # Maximum debt per 1000 LOC (default: 50.0)
</code></pre>
<p><strong>Deprecated Fields (v0.3.0+):</strong></p>
<p>The following validation thresholds are <strong>deprecated</strong> since v0.3.0 and will be removed in v1.0:</p>
<ul>
<li><code>max_high_complexity_count</code> - Replaced by <code>max_debt_density</code> (scale-independent)</li>
<li><code>max_debt_items</code> - Replaced by <code>max_debt_density</code> (scale-independent)</li>
<li><code>max_high_risk_functions</code> - Replaced by <code>max_debt_density</code> (scale-independent)</li>
</ul>
<p><strong>Migration:</strong> Use <code>max_debt_density</code> instead, which provides a scale-independent metric (debt per 1000 lines of code). This allows the same threshold to work across codebases of different sizes.</p>
<p>Use <code>debtmap validate</code> in CI to enforce code quality standards:</p>
<pre><code class="language-bash"># Fail build if validation thresholds are exceeded
debtmap validate
</code></pre>
<h2 id="language-configuration"><a class="header" href="#language-configuration">Language Configuration</a></h2>
<h3 id="enabling-languages"><a class="header" href="#enabling-languages">Enabling Languages</a></h3>
<p>Specify which languages to analyze:</p>
<pre><code class="language-toml">[languages]
enabled = ["rust", "python", "javascript", "typescript"]
</code></pre>
<h3 id="language-specific-features"><a class="header" href="#language-specific-features">Language-Specific Features</a></h3>
<p>Configure features for individual languages:</p>
<pre><code class="language-toml">[languages.rust]
detect_dead_code = false        # Rust: disabled by default (compiler handles it)
detect_complexity = true
detect_duplication = true

[languages.python]
detect_dead_code = true
detect_complexity = true
detect_duplication = true

[languages.javascript]
detect_dead_code = true
detect_complexity = true
detect_duplication = true

[languages.typescript]
detect_dead_code = true
detect_complexity = true
detect_duplication = true
</code></pre>
<p><strong>Note:</strong> Rust’s dead code detection is disabled by default since the Rust compiler already provides excellent unused code warnings.</p>
<h2 id="exclusion-patterns"><a class="header" href="#exclusion-patterns">Exclusion Patterns</a></h2>
<h3 id="file-and-directory-exclusion"><a class="header" href="#file-and-directory-exclusion">File and Directory Exclusion</a></h3>
<p>Use glob patterns to exclude files and directories from analysis:</p>
<pre><code class="language-toml">[ignore]
patterns = [
    "target/**",              # Rust build output
    "venv/**",                # Python virtual environment
    "node_modules/**",        # JavaScript dependencies
    "*.min.js",               # Minified files
    "benches/**",             # Benchmark code
    "tests/**/*",             # Test files
    "**/test_*.rs",           # Test files (prefix)
    "**/*_test.rs",           # Test files (suffix)
    "**/fixtures/**",         # Test fixtures
    "**/mocks/**",            # Mock implementations
    "**/stubs/**",            # Stub implementations
    "**/examples/**",         # Example code
    "**/demo/**",             # Demo code
]
</code></pre>
<p><strong>Glob pattern syntax:</strong></p>
<ul>
<li><code>*</code> - Matches any characters except <code>/</code></li>
<li><code>**</code> - Matches any characters including <code>/</code> (recursive)</li>
<li><code>?</code> - Matches a single character</li>
<li><code>[abc]</code> - Matches any character in the set</li>
</ul>
<p><strong>Note:</strong> Function-level filtering (e.g., ignoring specific function name patterns) is handled by role detection and context-aware analysis rather than explicit ignore patterns. See the Context-Aware Detection section for function-level filtering options.</p>
<h2 id="display-configuration"><a class="header" href="#display-configuration">Display Configuration</a></h2>
<p>Control how results are displayed:</p>
<pre><code class="language-toml">[display]
tiered = true           # Use tiered priority display (default: true)
items_per_tier = 5      # Show 5 items per tier (default: 5)
</code></pre>
<p>When <code>tiered = true</code>, Debtmap groups results into priority tiers (Critical, High, Medium, Low) and shows the top items from each tier.</p>
<h2 id="output-configuration"><a class="header" href="#output-configuration">Output Configuration</a></h2>
<p>Set the default output format:</p>
<pre><code class="language-toml">[output]
default_format = "terminal"    # Options: "terminal", "json", "markdown"
</code></pre>
<p><strong>Supported formats:</strong></p>
<ul>
<li><code>"terminal"</code> - Human-readable colored output for the terminal (default)</li>
<li><code>"json"</code> - Machine-readable JSON for integration with other tools</li>
<li><code>"markdown"</code> - Markdown format for documentation and reports</li>
</ul>
<p>This can be overridden with the <code>--format</code> CLI flag:</p>
<pre><code class="language-bash">debtmap analyze --format json      # JSON output
debtmap analyze --format markdown  # Markdown output
</code></pre>
<h2 id="normalization-configuration"><a class="header" href="#normalization-configuration">Normalization Configuration</a></h2>
<p>Control how raw scores are normalized to a 0-10 scale:</p>
<pre><code class="language-toml">[normalization]
linear_threshold = 10.0         # Use linear scaling below this value
logarithmic_threshold = 100.0   # Use logarithmic scaling above this value
sqrt_multiplier = 3.33          # Multiplier for square root scaling
log_multiplier = 10.0           # Multiplier for logarithmic scaling
show_raw_scores = true          # Show both raw and normalized scores
</code></pre>
<p>Normalization ensures scores are comparable across different codebases and prevents extreme outliers from dominating the results.</p>
<h2 id="advanced-configuration"><a class="header" href="#advanced-configuration">Advanced Configuration</a></h2>
<h3 id="entropy-based-complexity-scoring"><a class="header" href="#entropy-based-complexity-scoring">Entropy-Based Complexity Scoring</a></h3>
<p>Entropy analysis helps identify repetitive code patterns (like large match statements) that inflate complexity metrics:</p>
<pre><code class="language-toml">[entropy]
enabled = true                      # Enable entropy analysis (default: true)
weight = 1.0                        # Weight in complexity adjustment (default: 1.0)
min_tokens = 20                     # Minimum tokens for analysis (default: 20)
pattern_threshold = 0.7             # Pattern similarity threshold (default: 0.7)
entropy_threshold = 0.4             # Low entropy threshold (default: 0.4)
branch_threshold = 0.8              # Branch similarity threshold (default: 0.8)
use_classification = false          # Use smarter token classification (default: false)

# Maximum reductions to prevent over-correction
max_repetition_reduction = 0.20     # Max 20% reduction for repetition (default: 0.20)
max_entropy_reduction = 0.15        # Max 15% reduction for low entropy (default: 0.15)
max_branch_reduction = 0.25         # Max 25% reduction for similar branches (default: 0.25)
max_combined_reduction = 0.30       # Max 30% total reduction (default: 0.30)
</code></pre>
<p>Entropy scoring reduces false positives from functions like parsers and state machines that have high cyclomatic complexity but are actually simple and maintainable.</p>
<h3 id="god-object-detection"><a class="header" href="#god-object-detection">God Object Detection</a></h3>
<p>Configure detection of classes/structs with too many responsibilities:</p>
<pre><code class="language-toml">[god_object_detection]
enabled = true

# Rust-specific thresholds
[god_object_detection.rust]
max_methods = 20        # Maximum methods before flagging (default: 20)
max_fields = 15         # Maximum fields before flagging (default: 15)
max_traits = 5          # Maximum implemented traits
max_lines = 1000        # Maximum lines of code
max_complexity = 200    # Maximum total complexity

# Python-specific thresholds
[god_object_detection.python]
max_methods = 15
max_fields = 10
max_traits = 3
max_lines = 500
max_complexity = 150

# JavaScript-specific thresholds
[god_object_detection.javascript]
max_methods = 15
max_fields = 20         # JavaScript classes often have more properties
max_traits = 3
max_lines = 500
max_complexity = 150
</code></pre>
<p><strong>Note:</strong> Different languages have different defaults. Rust allows more methods since trait implementations add methods, while JavaScript classes should be smaller.</p>
<h3 id="context-aware-detection"><a class="header" href="#context-aware-detection">Context-Aware Detection</a></h3>
<p>Enable context-aware pattern detection to reduce false positives:</p>
<pre><code class="language-toml">[context]
enabled = false         # Opt-in (default: false)

# Custom context rules
[[context.rules]]
name = "allow_blocking_in_main"
pattern = "blocking_io"
action = "allow"
priority = 100
reason = "Main function can use blocking I/O"

[context.rules.context]
role = "main"

# Function pattern configuration
[context.function_patterns]
test_patterns = ["test_*", "bench_*"]
config_patterns = ["load_*_config", "parse_*_config"]
handler_patterns = ["handle_*", "*_handler"]
init_patterns = ["initialize_*", "setup_*"]
</code></pre>
<p>Context-aware detection adjusts severity based on where code appears (main functions, test code, configuration loaders, etc.).</p>
<h3 id="error-handling-detection"><a class="header" href="#error-handling-detection">Error Handling Detection</a></h3>
<p>Configure detection of error handling anti-patterns:</p>
<pre><code class="language-toml">[error_handling]
detect_async_errors = true          # Detect async error issues (default: true)
detect_context_loss = true          # Detect error context loss (default: true)
detect_propagation = true           # Analyze error propagation (default: true)
detect_panic_patterns = true        # Detect panic/unwrap usage (default: true)
detect_swallowing = true            # Detect swallowed errors (default: true)

# Custom error patterns
[[error_handling.custom_patterns]]
name = "custom_panic"
pattern = "my_panic_macro"
pattern_type = "macro_name"
severity = "high"
description = "Custom panic macro usage"
remediation = "Replace with Result-based error handling"

# Severity overrides
[[error_handling.severity_overrides]]
pattern = "unwrap"
context = "test"
severity = "low"        # Unwrap is acceptable in test code
</code></pre>
<h3 id="pure-mapping-pattern-detection"><a class="header" href="#pure-mapping-pattern-detection">Pure Mapping Pattern Detection</a></h3>
<p>Configure detection of pure mapping patterns to reduce false positives from exhaustive match expressions:</p>
<pre><code class="language-toml">[mapping_patterns]
enabled = true                      # Enable mapping pattern detection (default: true)
complexity_reduction = 0.30         # Reduce complexity by 30% (default: 0.30)
min_branches = 3                    # Minimum match arms to consider (default: 3)
</code></pre>
<p><strong>What are pure mapping patterns?</strong></p>
<p>Pure mapping patterns are exhaustive match expressions that transform input to output without side effects. These patterns have high cyclomatic complexity due to many branches, but are actually simple and maintainable because:</p>
<ul>
<li>Each branch is independent and straightforward</li>
<li>No mutation or side effects occur</li>
<li>The pattern is predictable and easy to understand</li>
<li>Adding new cases requires minimal changes</li>
</ul>
<p><strong>Example:</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn status_to_string(status: Status) -&gt; &amp;'static str {
    match status {
        Status::Success =&gt; "success",
        Status::Pending =&gt; "pending",
        Status::Failed =&gt; "failed",
        Status::Cancelled =&gt; "cancelled",
        // ... many more cases
    }
}
<span class="boring">}</span></code></pre>
<p>This function has high cyclomatic complexity (one branch per case), but is simple to maintain. Mapping pattern detection recognizes this and reduces the complexity score appropriately.</p>
<p><strong>Configuration options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Parameter</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>enabled</code></td><td>true</td><td>Enable mapping pattern detection</td></tr>
<tr><td><code>complexity_reduction</code></td><td>0.30</td><td>Percentage to reduce complexity (0.0-1.0)</td></tr>
<tr><td><code>min_branches</code></td><td>3</td><td>Minimum match arms to be considered a mapping pattern</td></tr>
</tbody>
</table>
</div>
<p><strong>Example configuration:</strong></p>
<pre><code class="language-toml"># Conservative reduction
[mapping_patterns]
complexity_reduction = 0.20         # Only 20% reduction

# Aggressive reduction for codebases with many mapping patterns
[mapping_patterns]
complexity_reduction = 0.50         # 50% reduction

# Disable if you want to see all match complexity
[mapping_patterns]
enabled = false
</code></pre>
<p><strong>When to adjust:</strong></p>
<ul>
<li><strong>Increase <code>complexity_reduction</code></strong> if you have many simple mapping functions being flagged as complex</li>
<li><strong>Decrease <code>complexity_reduction</code></strong> if you want more conservative adjustments</li>
<li><strong>Increase <code>min_branches</code></strong> to only apply reduction to very large match statements</li>
<li><strong>Disable entirely</strong> if you want raw complexity scores without adjustment</li>
</ul>
<h3 id="external-api-configuration"><a class="header" href="#external-api-configuration">External API Configuration</a></h3>
<p>Mark functions as public API for enhanced testing recommendations:</p>
<pre><code class="language-toml">[external_api]
detect_external_api = false         # Auto-detect public APIs (default: false)
api_functions = []                  # Explicitly mark API functions
api_files = []                      # Explicitly mark API files
</code></pre>
<p>When enabled, public API functions receive higher priority for test coverage.</p>
<h3 id="classification-configuration"><a class="header" href="#classification-configuration">Classification Configuration</a></h3>
<p>The <strong><code>[classification]</code></strong> section controls how Debtmap classifies functions by their semantic role (constructor, accessor, data flow, etc.). This classification drives role-based adjustments and reduces false positives.</p>
<pre><code class="language-toml">[classification]
# Constructor detection
[classification.constructors]
detect_constructors = true            # Enable constructor detection (default: true)
constructor_patterns = ["new", "create", "build", "from"]  # Common constructor names

# Accessor detection
[classification.accessors]
detect_accessors = true               # Enable accessor/getter detection (default: true)
accessor_patterns = ["get_*", "set_*", "is_*", "has_*"]   # Common accessor patterns

# Data flow detection
[classification.data_flow]
detect_data_flow = true               # Enable data flow analysis (default: true)
</code></pre>
<p><strong>Configuration Options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Section</th><th>Option</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>constructors</code></td><td><code>detect_constructors</code></td><td>true</td><td>Identify constructor functions</td></tr>
<tr><td><code>constructors</code></td><td><code>constructor_patterns</code></td><td>[“new”, “create”, “build”, “from”]</td><td>Name patterns for constructors</td></tr>
<tr><td><code>accessors</code></td><td><code>detect_accessors</code></td><td>true</td><td>Identify accessor/getter functions</td></tr>
<tr><td><code>accessors</code></td><td><code>accessor_patterns</code></td><td>[“get_<em>”, “set_</em>”, “is_<em>”, “has_</em>”]</td><td>Name patterns for accessors</td></tr>
<tr><td><code>data_flow</code></td><td><code>detect_data_flow</code></td><td>true</td><td>Enable data flow analysis</td></tr>
</tbody>
</table>
</div>
<p><strong>Why Classification Matters:</strong></p>
<p>Classification helps Debtmap understand function intent and apply appropriate complexity adjustments:</p>
<ul>
<li><strong>Constructors</strong> typically have boilerplate initialization code with naturally higher complexity</li>
<li><strong>Accessors</strong> are simple getters/setters that shouldn’t be flagged as debt</li>
<li><strong>Data flow functions</strong> (mappers, filters) have predictable patterns that inflate metrics</li>
</ul>
<p>By detecting these patterns, Debtmap reduces false positives and focuses on genuine technical debt.</p>
<h3 id="parallel-processing-configuration"><a class="header" href="#parallel-processing-configuration">Parallel Processing Configuration</a></h3>
<p>The <strong><code>[batch_analysis]</code></strong> section configures parallel processing for analyzing large codebases:</p>
<pre><code class="language-toml">[batch_analysis]
fail_fast = false                   # Stop on first error (default: false)
collect_timing = true               # Collect timing metrics (default: false)

[batch_analysis.parallelism]
enabled = true                      # Enable parallel processing (default: true)
max_concurrency = 4                 # Maximum concurrent threads (default: number of CPU cores)
batch_size = 100                    # Files per batch (default: 100)
</code></pre>
<p><strong>Configuration Options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>fail_fast</code></td><td>false</td><td>Stop analysis on first error encountered</td></tr>
<tr><td><code>collect_timing</code></td><td>false</td><td>Collect detailed timing information for performance analysis</td></tr>
<tr><td><code>parallelism.enabled</code></td><td>true</td><td>Enable parallel processing of files</td></tr>
<tr><td><code>parallelism.max_concurrency</code></td><td>CPU cores</td><td>Maximum number of concurrent analysis threads</td></tr>
<tr><td><code>parallelism.batch_size</code></td><td>100</td><td>Number of files to process in each batch</td></tr>
</tbody>
</table>
</div>
<p><strong>When to Adjust:</strong></p>
<pre><code class="language-toml"># For very large codebases
[batch_analysis.parallelism]
enabled = true
max_concurrency = 8                 # Use more threads
batch_size = 200                    # Larger batches

# For memory-constrained environments
[batch_analysis.parallelism]
max_concurrency = 2                 # Fewer threads
batch_size = 50                     # Smaller batches

# For debugging analysis issues
[batch_analysis]
fail_fast = true                    # Stop on first error
collect_timing = true               # Collect timing data
</code></pre>
<p>For detailed information on parallel processing, see the <a href="./parallel-processing.html">Parallel Processing</a> chapter.</p>
<p><strong>Source:</strong> <code>src/config/parallel.rs:108-143</code> (BatchAnalysisConfig)</p>
<h3 id="retry-configuration"><a class="header" href="#retry-configuration">Retry Configuration</a></h3>
<p>The <strong><code>[retry]</code></strong> section configures automatic retry behavior for resilient operations:</p>
<pre><code class="language-toml">[retry]
enabled = true                      # Enable automatic retries (default: true)
max_retries = 3                     # Maximum retry attempts (default: 3)
base_delay_ms = 100                 # Initial delay in milliseconds (default: 100)
strategy = "exponential"            # Backoff strategy (default: exponential)
timeout_seconds = 30                # Maximum total retry time (default: 30)
jitter_factor = 0.1                 # Randomness factor (default: 0.1)
</code></pre>
<p><strong>Configuration Options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>enabled</code></td><td>true</td><td>Enable automatic retries on transient failures</td></tr>
<tr><td><code>max_retries</code></td><td>3</td><td>Maximum number of retry attempts before giving up</td></tr>
<tr><td><code>base_delay_ms</code></td><td>100</td><td>Base delay between retries in milliseconds</td></tr>
<tr><td><code>strategy</code></td><td>exponential</td><td>Backoff strategy: constant, linear, exponential, fibonacci</td></tr>
<tr><td><code>timeout_seconds</code></td><td>30</td><td>Maximum total time to spend retrying (seconds)</td></tr>
<tr><td><code>jitter_factor</code></td><td>0.1</td><td>Add randomness to delays (0.0-1.0) to prevent thundering herd</td></tr>
</tbody>
</table>
</div>
<p><strong>Retry Strategies:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Strategy</th><th>Delay Pattern</th><th>Use Case</th></tr>
</thead>
<tbody>
<tr><td><code>constant</code></td><td>Same delay every time</td><td>Simple rate limiting</td></tr>
<tr><td><code>linear</code></td><td>Increases linearly (100ms, 200ms, 300ms)</td><td>Moderate backoff</td></tr>
<tr><td><code>exponential</code></td><td>Doubles each time (100ms, 200ms, 400ms)</td><td>Standard backoff (recommended)</td></tr>
<tr><td><code>fibonacci</code></td><td>Fibonacci sequence (100ms, 100ms, 200ms, 300ms)</td><td>Gradual backoff</td></tr>
</tbody>
</table>
</div>
<p><strong>Example Configurations:</strong></p>
<pre><code class="language-toml"># Aggressive retry for flaky file systems
[retry]
max_retries = 5
base_delay_ms = 50
strategy = "exponential"
timeout_seconds = 60

# Conservative retry for network operations
[retry]
max_retries = 2
base_delay_ms = 500
strategy = "linear"
timeout_seconds = 10

# Disable retries for fast failure
[retry]
enabled = false
</code></pre>
<p><strong>Source:</strong> <code>src/config/retry.rs:33-79</code> (RetryConfig), <code>src/config/retry.rs:141-155</code> (RetryStrategy)</p>
<h3 id="advanced-analysis-settings"><a class="header" href="#advanced-analysis-settings">Advanced Analysis Settings</a></h3>
<p>The <strong><code>[analysis]</code></strong> section configures advanced analysis features for call graph and dead code detection:</p>
<pre><code class="language-toml">[analysis]
enable_trait_analysis = true               # Enable trait method resolution (default: true)
enable_function_pointer_tracking = true    # Track function pointers and closures (default: true)
enable_framework_patterns = true           # Detect framework patterns (default: true)
enable_cross_module_analysis = true        # Analyze cross-module dependencies (default: true)
max_analysis_depth = 10                    # Maximum transitive analysis depth (default: 10)
</code></pre>
<p><strong>Configuration Options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>enable_trait_analysis</code></td><td>true</td><td>Resolve trait method calls in call graph analysis</td></tr>
<tr><td><code>enable_function_pointer_tracking</code></td><td>true</td><td>Track function pointers and closure usage</td></tr>
<tr><td><code>enable_framework_patterns</code></td><td>true</td><td>Detect test functions, HTTP handlers, and other framework entry points</td></tr>
<tr><td><code>enable_cross_module_analysis</code></td><td>true</td><td>Analyze dependencies across module boundaries</td></tr>
<tr><td><code>max_analysis_depth</code></td><td>10</td><td>Maximum depth for transitive dependency analysis</td></tr>
</tbody>
</table>
</div>
<p><strong>When to Adjust:</strong></p>
<pre><code class="language-toml"># For deep dependency analysis in large projects
[analysis]
max_analysis_depth = 20                    # Allow deeper transitive analysis

# For faster analysis with limited resources
[analysis]
enable_cross_module_analysis = false       # Skip cross-module analysis
max_analysis_depth = 5                     # Limit depth

# For framework-heavy codebases (web apps, CLI apps)
[analysis]
enable_framework_patterns = true           # Detect entry points
enable_trait_analysis = true               # Resolve trait methods
</code></pre>
<p><strong>Framework Pattern Detection:</strong></p>
<p>When <code>enable_framework_patterns = true</code>, Debtmap recognizes common entry point patterns:</p>
<ul>
<li><strong>Test functions:</strong> Functions with <code>#[test]</code>, <code>#[tokio::test]</code>, or test prefixes</li>
<li><strong>HTTP handlers:</strong> Functions with routing attributes like <code>#[get]</code>, <code>#[post]</code></li>
<li><strong>CLI commands:</strong> Functions with CLI framework attributes</li>
<li><strong>Main functions:</strong> Entry points like <code>main()</code> and <code>async fn main()</code></li>
</ul>
<p>This prevents false positives from flagging framework entry points as dead code.</p>
<p><strong>Source:</strong> <code>src/config/core.rs:149-167</code> (AnalysisSettings)</p>
<h3 id="state-detection-configuration"><a class="header" href="#state-detection-configuration">State Detection Configuration</a></h3>
<p>The <strong><code>[state_detection]</code></strong> section configures detection of state machine patterns and state fields:</p>
<pre><code class="language-toml">[state_detection]
use_type_analysis = true              # Enable type-based detection (default: true)
use_frequency_analysis = true         # Enable frequency analysis (default: true)
use_pattern_recognition = true        # Enable semantic pattern recognition (default: true)
min_enum_variants = 3                 # Minimum enum variants for state detection (default: 3)
custom_keywords = []                  # Additional state keywords (default: [])
custom_patterns = []                  # Additional regex patterns (default: [])
</code></pre>
<p><strong>Configuration Options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>use_type_analysis</code></td><td>true</td><td>Analyze type names and structures for state indicators</td></tr>
<tr><td><code>use_frequency_analysis</code></td><td>true</td><td>Use statistical analysis to detect state fields</td></tr>
<tr><td><code>use_pattern_recognition</code></td><td>true</td><td>Apply semantic pattern matching for state detection</td></tr>
<tr><td><code>min_enum_variants</code></td><td>3</td><td>Minimum variants for enum to be considered state machine</td></tr>
<tr><td><code>custom_keywords</code></td><td>[]</td><td>Additional keywords to identify state fields</td></tr>
<tr><td><code>custom_patterns</code></td><td>[]</td><td>Additional regex patterns for state field names</td></tr>
</tbody>
</table>
</div>
<p><strong>Built-in State Keywords:</strong></p>
<p>Debtmap recognizes these common state field patterns:</p>
<ul>
<li><strong>Field keywords:</strong> state, mode, status, phase, stage, step, kind, type, variant</li>
<li><strong>Prefixes:</strong> current_, next_, prev_, target_, desired_, actual_, expected_</li>
<li><strong>Suffixes:</strong> _state, _mode, _status, _phase, _stage, _type, _kind</li>
</ul>
<p><strong>Example Configurations:</strong></p>
<pre><code class="language-toml"># Add domain-specific state keywords
[state_detection]
custom_keywords = ["fsm_state", "machine_state", "workflow_step"]
custom_patterns = ["current_.*", "next_.*"]

# Strict enum state detection (only large enums)
[state_detection]
min_enum_variants = 5

# Disable frequency analysis for performance
[state_detection]
use_frequency_analysis = false
</code></pre>
<p><strong>Why State Detection Matters:</strong></p>
<p>Functions that manage state machines or state fields naturally have higher complexity due to branching on state. Debtmap’s state detection:</p>
<ul>
<li>Identifies state management code</li>
<li>Adjusts complexity scoring to account for state branching</li>
<li>Reduces false positives from legitimate state machine patterns</li>
</ul>
<p><strong>Source:</strong> <code>src/analyzers/state_field_detector.rs:286-340</code> (StateDetectionConfig)</p>
<h3 id="coverage-expectations-configuration"><a class="header" href="#coverage-expectations-configuration">Coverage Expectations Configuration</a></h3>
<p>The <strong><code>[coverage_expectations]</code></strong> section configures role-based test coverage expectations:</p>
<pre><code class="language-toml"># Pure functions: high expectations (90-100%)
[coverage_expectations.pure]
min = 90.0                            # Minimum acceptable coverage
target = 95.0                         # Target/ideal coverage
max = 100.0                           # Maximum meaningful coverage

# Business logic: very high expectations (80-95%)
[coverage_expectations.business_logic]
min = 80.0
target = 90.0
max = 95.0

# State management: high expectations (75-90%)
[coverage_expectations.state_management]
min = 75.0
target = 85.0
max = 90.0

# I/O operations: moderate expectations (60-80%)
[coverage_expectations.io_operations]
min = 60.0
target = 70.0
max = 80.0

# Validation: very high expectations (85-98%)
[coverage_expectations.validation]
min = 85.0
target = 92.0
max = 98.0

# Error handling: high expectations (70-90%)
[coverage_expectations.error_handling]
min = 70.0
target = 80.0
max = 90.0

# Configuration: moderate expectations (60-80%)
[coverage_expectations.configuration]
min = 60.0
target = 70.0
max = 80.0

# Initialization: moderate expectations (50-75%)
[coverage_expectations.initialization]
min = 50.0
target = 65.0
max = 75.0

# Orchestration: moderate-high expectations (65-85%)
[coverage_expectations.orchestration]
min = 65.0
target = 75.0
max = 85.0

# Utilities: high expectations (75-95%)
[coverage_expectations.utilities]
min = 75.0
target = 85.0
max = 95.0

# Debug/Development: low expectations (20-40%)
[coverage_expectations.debug]
min = 20.0
target = 30.0
max = 40.0

# Performance optimization: low-moderate expectations (40-60%)
[coverage_expectations.performance]
min = 40.0
target = 50.0
max = 60.0
</code></pre>
<p><strong>Coverage Range Parameters:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Parameter</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>min</code></td><td>Minimum acceptable coverage - below this flags as high priority</td></tr>
<tr><td><code>target</code></td><td>Target/ideal coverage - the goal for this function role</td></tr>
<tr><td><code>max</code></td><td>Maximum meaningful coverage - diminishing returns above this</td></tr>
</tbody>
</table>
</div>
<p><strong>Role-Based Rationale:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Function Role</th><th>Expectations</th><th>Why?</th></tr>
</thead>
<tbody>
<tr><td><strong>Pure Logic</strong></td><td>Very High (90-100%)</td><td>Easy to unit test, should have comprehensive tests</td></tr>
<tr><td><strong>Business Logic</strong></td><td>Very High (80-95%)</td><td>Core functionality requires thorough testing</td></tr>
<tr><td><strong>I/O Operations</strong></td><td>Moderate (60-80%)</td><td>Often integration tested rather than unit tested</td></tr>
<tr><td><strong>Debug</strong></td><td>Low (20-40%)</td><td>Diagnostic code has low testing priority</td></tr>
<tr><td><strong>Orchestration</strong></td><td>Moderate-High (65-85%)</td><td>Tested via higher-level tests</td></tr>
</tbody>
</table>
</div>
<p><strong>Example Configurations:</strong></p>
<pre><code class="language-toml"># Strict quality standards (increase all expectations)
[coverage_expectations.pure]
min = 95.0
target = 98.0
max = 100.0

[coverage_expectations.business_logic]
min = 90.0
target = 95.0
max = 98.0

# Legacy codebase (lower expectations)
[coverage_expectations.pure]
min = 70.0
target = 85.0
max = 95.0

[coverage_expectations.business_logic]
min = 60.0
target = 75.0
max = 85.0
</code></pre>
<p><strong>How Coverage Expectations Work:</strong></p>
<p>When Debtmap calculates coverage scores:</p>
<ol>
<li>Identifies function’s semantic role (pure, business_logic, io_operations, etc.)</li>
<li>Looks up coverage expectations for that role</li>
<li>Compares actual coverage to expected range</li>
<li>Penalizes functions below <code>min</code> more heavily</li>
<li>Rewards functions meeting or exceeding <code>target</code></li>
</ol>
<p>This ensures that scoring reflects realistic testing strategies rather than assuming all functions need 100% coverage.</p>
<p><strong>Source:</strong> <code>src/priority/scoring/coverage_expectations.rs:103-173</code> (CoverageExpectations)</p>
<h3 id="additional-advanced-options"><a class="header" href="#additional-advanced-options">Additional Advanced Options</a></h3>
<p>Debtmap supports additional advanced configuration options:</p>
<h4 id="lines-of-code-configuration"><a class="header" href="#lines-of-code-configuration">Lines of Code Configuration</a></h4>
<p>The <strong><code>[loc]</code></strong> section controls how lines of code are counted for metrics and reporting:</p>
<pre><code class="language-toml">[loc]
include_tests = false         # Exclude test files from LOC counts (default: false)
include_generated = false     # Exclude generated files from LOC counts (default: false)
count_comments = false        # Include comment lines in LOC counts (default: false)
count_blank_lines = false     # Include blank lines in LOC counts (default: false)
</code></pre>
<p><strong>Configuration options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>include_tests</code></td><td>false</td><td>Whether to include test files in LOC metrics</td></tr>
<tr><td><code>include_generated</code></td><td>false</td><td>Whether to include generated files in LOC metrics</td></tr>
<tr><td><code>count_comments</code></td><td>false</td><td>Whether to count comment lines as LOC</td></tr>
<tr><td><code>count_blank_lines</code></td><td>false</td><td>Whether to count blank lines as LOC</td></tr>
</tbody>
</table>
</div>
<p><strong>Example - Strict LOC counting:</strong></p>
<pre><code class="language-toml">[loc]
include_tests = false         # Focus on production code
include_generated = false     # Exclude auto-generated code
count_comments = false        # Only count executable code
count_blank_lines = false     # Exclude whitespace
</code></pre>
<h4 id="tier-configuration"><a class="header" href="#tier-configuration">Tier Configuration</a></h4>
<p>The <strong><code>[tiers]</code></strong> section configures tier threshold boundaries for prioritization:</p>
<pre><code class="language-toml">[tiers]
t2_complexity_threshold = 15      # Complexity threshold for Tier 2 (default: 15)
t2_dependency_threshold = 10      # Dependency threshold for Tier 2 (default: 10)
t3_complexity_threshold = 10      # Complexity threshold for Tier 3 (default: 10)
show_t4_in_main_report = false    # Show Tier 4 items in main report (default: false)
</code></pre>
<p><strong>Tier priority levels:</strong></p>
<ul>
<li><strong>Tier 1 (Critical)</strong>: Highest priority items</li>
<li><strong>Tier 2 (High)</strong>: Items above <code>t2_*</code> thresholds</li>
<li><strong>Tier 3 (Medium)</strong>: Items above <code>t3_*</code> thresholds</li>
<li><strong>Tier 4 (Low)</strong>: Items below all thresholds</li>
</ul>
<p><strong>Example - Stricter tier boundaries:</strong></p>
<pre><code class="language-toml">[tiers]
t2_complexity_threshold = 12      # Lower threshold = more items in high priority
t2_dependency_threshold = 8
t3_complexity_threshold = 8
show_t4_in_main_report = true     # Include low-priority items
</code></pre>
<h4 id="enhanced-complexity-thresholds"><a class="header" href="#enhanced-complexity-thresholds">Enhanced Complexity Thresholds</a></h4>
<p>The <strong><code>[complexity_thresholds]</code></strong> section provides more granular control over complexity detection:</p>
<p>This supplements the basic <code>[thresholds]</code> section with minimum total, cyclomatic, and cognitive complexity thresholds for flagging functions.</p>
<p>These options are advanced features with sensible defaults. Most users won’t need to configure them explicitly.</p>
<h4 id="orchestration-adjustment"><a class="header" href="#orchestration-adjustment">Orchestration Adjustment</a></h4>
<p>The <strong><code>[orchestration_adjustment]</code></strong> section configures complexity reduction for orchestrator functions that primarily delegate to other functions:</p>
<pre><code class="language-toml">[orchestration_adjustment]
enabled = true                        # Enable orchestration detection (default: true)
min_delegation_ratio = 0.6            # Minimum ratio of delegated calls (default: 0.6)
complexity_reduction = 0.25           # Reduce complexity by 25% (default: 0.25)
</code></pre>
<p><strong>Configuration Options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>enabled</code></td><td>true</td><td>Enable orchestration pattern detection</td></tr>
<tr><td><code>min_delegation_ratio</code></td><td>0.6</td><td>Minimum % of function that delegates to be considered orchestrator</td></tr>
<tr><td><code>complexity_reduction</code></td><td>0.25</td><td>Percentage to reduce complexity score (0.0-1.0)</td></tr>
</tbody>
</table>
</div>
<p>Orchestrator functions coordinate multiple operations but don’t contain complex logic themselves. This adjustment prevents them from being over-penalized.</p>
<h4 id="boilerplate-detection"><a class="header" href="#boilerplate-detection">Boilerplate Detection</a></h4>
<p>The <strong><code>[boilerplate_detection]</code></strong> section identifies and reduces penalties for boilerplate code patterns:</p>
<pre><code class="language-toml">[boilerplate_detection]
enabled = true                        # Enable boilerplate detection (default: true)
detect_constructors = true            # Detect constructor boilerplate (default: true)
detect_error_conversions = true       # Detect error conversion boilerplate (default: true)
complexity_reduction = 0.20           # Reduce complexity by 20% (default: 0.20)
</code></pre>
<p><strong>Configuration Options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>enabled</code></td><td>true</td><td>Enable boilerplate pattern detection</td></tr>
<tr><td><code>detect_constructors</code></td><td>true</td><td>Identify constructor initialization boilerplate</td></tr>
<tr><td><code>detect_error_conversions</code></td><td>true</td><td>Identify error type conversion boilerplate</td></tr>
<tr><td><code>complexity_reduction</code></td><td>0.20</td><td>Percentage to reduce complexity for boilerplate (0.0-1.0)</td></tr>
</tbody>
</table>
</div>
<p>Boilerplate code often inflates complexity metrics without representing true technical debt. This detection reduces false positives from necessary but repetitive code.</p>
<h4 id="functional-analysis"><a class="header" href="#functional-analysis">Functional Analysis</a></h4>
<p>The <strong><code>[functional_analysis]</code></strong> section configures detection of functional programming patterns:</p>
<pre><code class="language-toml">[functional_analysis]
enabled = true                        # Enable functional pattern detection (default: true)
detect_pure_functions = true          # Detect pure functions (default: true)
detect_higher_order = true            # Detect higher-order functions (default: true)
detect_immutable_patterns = true      # Detect immutable data patterns (default: true)
</code></pre>
<p><strong>Configuration Options:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>enabled</code></td><td>true</td><td>Enable functional programming analysis</td></tr>
<tr><td><code>detect_pure_functions</code></td><td>true</td><td>Identify functions without side effects</td></tr>
<tr><td><code>detect_higher_order</code></td><td>true</td><td>Identify functions that take/return functions</td></tr>
<tr><td><code>detect_immutable_patterns</code></td><td>true</td><td>Identify immutable data structure usage</td></tr>
</tbody>
</table>
</div>
<p>Functional patterns often lead to cleaner, more testable code. This analysis helps Debtmap recognize and appropriately score functional programming idioms.</p>
<h2 id="cli-integration"><a class="header" href="#cli-integration">CLI Integration</a></h2>
<p>CLI flags can override configuration file settings:</p>
<pre><code class="language-bash"># Override complexity threshold
debtmap analyze --threshold-complexity 15

# Provide coverage file
debtmap analyze --coverage-file coverage.json

# Enable context-aware detection
debtmap analyze --context

# Override output format
debtmap analyze --format json
</code></pre>
<h3 id="configuration-precedence"><a class="header" href="#configuration-precedence">Configuration Precedence</a></h3>
<p>Debtmap resolves configuration values in the following order (highest to lowest priority):</p>
<ol>
<li><strong>CLI flags</strong> - Command-line arguments (e.g., <code>--threshold-complexity 15</code>)</li>
<li><strong>Configuration file</strong> - Settings from <code>.debtmap.toml</code></li>
<li><strong>Built-in defaults</strong> - Debtmap’s sensible default values</li>
</ol>
<p>This allows you to set project-wide defaults in <code>.debtmap.toml</code> while customizing specific runs with CLI flags.</p>
<h2 id="configuration-validation"><a class="header" href="#configuration-validation">Configuration Validation</a></h2>
<h3 id="automatic-validation"><a class="header" href="#automatic-validation">Automatic Validation</a></h3>
<p>Debtmap automatically validates your configuration when loading:</p>
<ul>
<li><strong>Scoring weights</strong> must sum to 1.0 (±0.001 tolerance)</li>
<li><strong>Individual weights</strong> must be between 0.0 and 1.0</li>
<li><strong>Invalid configurations</strong> fall back to defaults with a warning</li>
</ul>
<h3 id="normalization"><a class="header" href="#normalization">Normalization</a></h3>
<p>If scoring weights don’t sum exactly to 1.0, Debtmap automatically normalizes them:</p>
<pre><code class="language-toml"># Input (sums to 0.80)
[scoring]
coverage = 0.40
complexity = 0.30
dependency = 0.10

# Automatically normalized to:
# coverage = 0.50
# complexity = 0.375
# dependency = 0.125
</code></pre>
<h3 id="debug-validation"><a class="header" href="#debug-validation">Debug Validation</a></h3>
<p>To verify which configuration file is being loaded, check debug logs:</p>
<pre><code class="language-bash">RUST_LOG=debug debtmap analyze
</code></pre>
<p>Look for log messages like:</p>
<pre><code>DEBUG debtmap::config: Loaded config from /path/to/.debtmap.toml
</code></pre>
<h2 id="complete-configuration-example"><a class="header" href="#complete-configuration-example">Complete Configuration Example</a></h2>
<p>Here’s a comprehensive configuration showing all major sections:</p>
<pre><code class="language-toml"># Scoring configuration
[scoring]
coverage = 0.50
complexity = 0.35
dependency = 0.15

# Basic thresholds
[thresholds]
complexity = 10
duplication = 50
max_file_length = 500
max_function_length = 50
minimum_debt_score = 2.0
minimum_cyclomatic_complexity = 3
minimum_cognitive_complexity = 5
minimum_risk_score = 2.0

# Validation thresholds for CI
[thresholds.validation]
max_average_complexity = 10.0
max_high_complexity_count = 100       # DEPRECATED: Use max_debt_density
max_debt_items = 2000                 # DEPRECATED: Use max_debt_density
max_total_debt_score = 10000
max_codebase_risk_score = 7.0
max_high_risk_functions = 50          # DEPRECATED: Use max_debt_density
min_coverage_percentage = 0.0
max_debt_density = 50.0

# Language configuration
[languages]
enabled = ["rust", "python", "javascript", "typescript"]

[languages.rust]
detect_dead_code = false
detect_complexity = true
detect_duplication = true

# Exclusion patterns
[ignore]
patterns = [
    "target/**",
    "node_modules/**",
    "tests/**/*",
    "**/*_test.rs",
]

# Display configuration
[display]
tiered = true
items_per_tier = 5

# Output configuration
[output]
default_format = "terminal"

# Entropy configuration
[entropy]
enabled = true
weight = 1.0
min_tokens = 20

# God object detection
[god_object_detection]
enabled = true

[god_object_detection.rust]
max_methods = 20
max_fields = 15

# Classification configuration
[classification.constructors]
detect_constructors = true
constructor_patterns = ["new", "create", "build", "from"]

[classification.accessors]
detect_accessors = true
accessor_patterns = ["get_*", "set_*", "is_*", "has_*"]

[classification.data_flow]
detect_data_flow = true

# Advanced analysis
[orchestration_adjustment]
enabled = true
min_delegation_ratio = 0.6
complexity_reduction = 0.25

[boilerplate_detection]
enabled = true
detect_constructors = true
detect_error_conversions = true
complexity_reduction = 0.20

[functional_analysis]
enabled = true
detect_pure_functions = true
detect_higher_order = true
detect_immutable_patterns = true
</code></pre>
<h2 id="configuration-best-practices"><a class="header" href="#configuration-best-practices">Configuration Best Practices</a></h2>
<h3 id="for-strict-quality-standards"><a class="header" href="#for-strict-quality-standards">For Strict Quality Standards</a></h3>
<pre><code class="language-toml">[scoring]
coverage = 0.60         # Emphasize test coverage
complexity = 0.30
dependency = 0.10

[thresholds]
minimum_debt_score = 3.0        # Higher bar for flagging issues
max_function_length = 30        # Enforce smaller functions

[thresholds.validation]
max_average_complexity = 8.0    # Stricter complexity limits
max_debt_items = 500            # Stricter debt limits
min_coverage_percentage = 80.0  # Require 80% coverage
</code></pre>
<h3 id="for-legacy-codebases"><a class="header" href="#for-legacy-codebases">For Legacy Codebases</a></h3>
<pre><code class="language-toml">[scoring]
coverage = 0.30         # Reduce coverage weight (legacy code often lacks tests)
complexity = 0.50       # Focus on complexity
dependency = 0.20

[thresholds]
minimum_debt_score = 5.0        # Only show highest priority items
minimum_cyclomatic_complexity = 10   # Filter out moderate complexity

[thresholds.validation]
max_debt_items = 10000          # Accommodate large debt
max_total_debt_score = 5000     # Higher limits for legacy code
</code></pre>
<h3 id="for-open-source-libraries"><a class="header" href="#for-open-source-libraries">For Open Source Libraries</a></h3>
<pre><code class="language-toml">[scoring]
coverage = 0.55         # Prioritize test coverage (public API)
complexity = 0.30
dependency = 0.15

[external_api]
detect_external_api = true      # Flag untested public APIs

[thresholds.validation]
min_coverage_percentage = 90.0  # High coverage for public API
max_high_complexity_count = 20  # Keep complexity low
</code></pre>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="configuration-not-loading"><a class="header" href="#configuration-not-loading">Configuration Not Loading</a></h3>
<p><strong>Check file location:</strong></p>
<pre><code class="language-bash"># Ensure file is named .debtmap.toml (note the dot prefix)
ls -la .debtmap.toml

# Debtmap searches current directory + 10 parent directories
pwd
</code></pre>
<p><strong>Check file syntax:</strong></p>
<pre><code class="language-bash"># Verify TOML syntax is valid
debtmap analyze 2&gt;&amp;1 | grep -i "failed to parse"
</code></pre>
<h3 id="weights-dont-sum-to-10"><a class="header" href="#weights-dont-sum-to-10">Weights Don’t Sum to 1.0</a></h3>
<p><strong>Error message:</strong></p>
<pre><code>Warning: Invalid scoring weights: Active scoring weights must sum to 1.0, but sum to 0.800. Using defaults.
</code></pre>
<p><strong>Fix:</strong> Ensure coverage + complexity + dependency = 1.0</p>
<pre><code class="language-toml">[scoring]
coverage = 0.50
complexity = 0.35
dependency = 0.15    # Sum = 1.0 ✓
</code></pre>
<h3 id="no-results-shown"><a class="header" href="#no-results-shown">No Results Shown</a></h3>
<p><strong>Possible causes:</strong></p>
<ol>
<li>Minimum thresholds too high</li>
<li>All code excluded by ignore patterns</li>
<li>No supported languages in project</li>
</ol>
<p><strong>Solutions:</strong></p>
<pre><code class="language-toml"># Lower minimum thresholds
[thresholds]
minimum_debt_score = 1.0
minimum_cyclomatic_complexity = 1

# Check language configuration
[languages]
enabled = ["rust", "python", "javascript", "typescript"]

# Review ignore patterns
[ignore]
patterns = [
    # Make sure you're not excluding too much
]
</code></pre>
<h2 id="related-chapters"><a class="header" href="#related-chapters">Related Chapters</a></h2>
<ul>
<li><a href="./getting-started.html">Getting Started</a> - Initial setup and basic usage</li>
<li><a href="./analysis-guide/index.html">Analysis Guide</a> - Understanding scoring and prioritization</li>
<li><a href="./output-formats.html">Output Formats</a> - Formatting and exporting results</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="compare-analysis.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="threshold-configuration.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="compare-analysis.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="threshold-configuration.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
